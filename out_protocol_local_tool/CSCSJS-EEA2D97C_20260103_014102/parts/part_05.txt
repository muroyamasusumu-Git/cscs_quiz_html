<<<PART_BEGIN>>>
【分割コード(5)の開始】
PartID: CSCSJS-EEA2D97C-P05-of-05
PartSHA256: 7ee538a957ebafb361621a0c3be2cd05dac2bb5426ec9c9be48055aa26ebcef5
Range: chars 160532..169672 (len=9140)
FirstLine:       `;
LastLine: })();
EndNewline: NO
PART_SCOPE_HINT: LineRange=L4454..L4688 | BraceDepth=3->0
PART_SCOPE_HINT_TOP_IDENTIFIERS: classList:18, once:18, box:17, sync:15, card:14, collapsed:11, addEventListener:10, onceCardSync:10, onceCardLocal:10, window:10, querySelector:9, compact:9
PART_SCOPE_HINT_DEFINES: refreshToggleBtnLabel, refreshOnceFoldBtnLabel, markOptional, refreshNoPullBtnLabel, wrap, monitorOpen, toggleBtn, isOpen, nextOpen, daysDetails, queueDetails, LS_ONCE_OPEN_SYNC, LS_ONCE_OPEN_LOCAL, onceCardSync, onceCardLocal, onceFoldBtnSync, onceFoldBtnLocal, onceOpenSync, onceOpenLocal, card, daysOpen, queueOpen, btnOk, btnNg, LS_NO_PULL, noPullBtn, on, nextOn

```javascript
      `;
      const wrap = document.querySelector("div.wrap");
      if (wrap) {
        wrap.appendChild(box);
      } else {
        document.body.appendChild(box);
      }

      // === ④ 折りたたみ状態の復元＆永続化（モニタ全体 / Days / Queue） ===
      try{
        /* ★ OPEN/CLOSE は「パネル全体」ではなく「指定4項目（sync-optional）だけ」を出し入れする
           - cscs-compact: オプション項目を隠す（デフォルト）
           - compact 解除: オプション項目を表示（＝OPEN状態）
           - 状態は LS_MON_OPEN に保存し、リロード後も維持 */
        const monitorOpen = readLsBool(LS_MON_OPEN, false);  // デフォルトはCLOSE（オプション非表示）
        if (monitorOpen) {
          box.classList.remove("cscs-compact");
        } else {
          box.classList.add("cscs-compact");
        }

        const toggleBtn = box.querySelector('button[data-sync-toggle="1"]');
        function refreshToggleBtnLabel(){
          if (!toggleBtn) return;
          const isOpen = !box.classList.contains("cscs-compact"); // compact解除＝OPEN
          toggleBtn.textContent = isOpen ? "CLOSE" : "OPEN";
        }
        refreshToggleBtnLabel();

        if (toggleBtn) {
          toggleBtn.addEventListener("click", function(){
            // ★ クリックで「オプション項目」だけをトグル（他の項目は常時表示）
            const nextOpen = box.classList.contains("cscs-compact"); // 今CLOSE(=compact)ならOPENへ
            if (nextOpen) {
              box.classList.remove("cscs-compact");
            } else {
              box.classList.add("cscs-compact");
            }
            // ★ 永続化：OPEN状態（true/false）を保存
            writeLsBool(LS_MON_OPEN, nextOpen);
            refreshToggleBtnLabel();
          });
        }

        const daysDetails       = box.querySelector('details.sync-fold[data-fold="days"]');
        const queueDetails      = box.querySelector('details.sync-fold[data-fold="queue"]');

        // ============================================================
        // ★ OncePerDayToday / O.D.O.A Mode：カード単体の折りたたみ
        // ------------------------------------------------------------
        // - 見出し右端: 「▶show / ▼hide」
        // - 折りたたみ時: 見出し + 3行目（count対象）のみ表示
        // - 状態は localStorage に永続化
        // ============================================================
        // ============================================================
        // ★ OncePerDayToday / O.D.O.A Mode：カード単体の折りたたみ（SYNC / local を分離）
        // ------------------------------------------------------------
        // - data-once-fold="sync" / "local" をそれぞれ別カードとして扱う
        // - 状態は localStorage に別キーで永続化する
        // ============================================================
        const LS_ONCE_OPEN_SYNC  = "cscs_sync_a_onceperday_open_sync";
        const LS_ONCE_OPEN_LOCAL = "cscs_sync_a_onceperday_open_local";

        const onceCardSync   = box.querySelector(".sync-card.once-card.once-card-sync");
        const onceCardLocal  = box.querySelector(".sync-card.once-card.once-card-local");
        const onceFoldBtnSync  = box.querySelector('button[data-once-fold="sync"]');
        const onceFoldBtnLocal = box.querySelector('button[data-once-fold="local"]');

        function refreshOnceFoldBtnLabel(btn, card){
          if (!btn) return;
          const isOpen = !(card && card.classList.contains("once-collapsed"));
          btn.textContent = isOpen ? "▼hide" : "▶show";
        }

        try{
          // ★ 処理: SYNCカードの折りたたみ状態を復元する
          const onceOpenSync = readLsBool(LS_ONCE_OPEN_SYNC, false); // デフォルトは折りたたみ（closed）
          if (onceCardSync) {
            if (onceOpenSync) {
              onceCardSync.classList.remove("once-collapsed");
            } else {
              onceCardSync.classList.add("once-collapsed");
            }
          }
          refreshOnceFoldBtnLabel(onceFoldBtnSync, onceCardSync);

          // ★ 処理: localカードの折りたたみ状態を復元する
          const onceOpenLocal = readLsBool(LS_ONCE_OPEN_LOCAL, false); // デフォルトは折りたたみ（closed）
          if (onceCardLocal) {
            if (onceOpenLocal) {
              onceCardLocal.classList.remove("once-collapsed");
            } else {
              onceCardLocal.classList.add("once-collapsed");
            }
          }
          refreshOnceFoldBtnLabel(onceFoldBtnLocal, onceCardLocal);
        }catch(_){}

        if (onceFoldBtnSync) {
          onceFoldBtnSync.addEventListener("click", function(){
            try{
              if (!onceCardSync) return;
              // ★ 処理: SYNCカードをトグルし、永続化する
              const nextOpen = onceCardSync.classList.contains("once-collapsed"); // 今閉じてるなら開く
              if (nextOpen) {
                onceCardSync.classList.remove("once-collapsed");
              } else {
                onceCardSync.classList.add("once-collapsed");
              }
              writeLsBool(LS_ONCE_OPEN_SYNC, nextOpen);
              refreshOnceFoldBtnLabel(onceFoldBtnSync, onceCardSync);
            }catch(_){}
          });
        }

        if (onceFoldBtnLocal) {
          onceFoldBtnLocal.addEventListener("click", function(){
            try{
              if (!onceCardLocal) return;
              // ★ 処理: localカードをトグルし、永続化する
              const nextOpen = onceCardLocal.classList.contains("once-collapsed"); // 今閉じてるなら開く
              if (nextOpen) {
                onceCardLocal.classList.remove("once-collapsed");
              } else {
                onceCardLocal.classList.add("once-collapsed");
              }
              writeLsBool(LS_ONCE_OPEN_LOCAL, nextOpen);
              refreshOnceFoldBtnLabel(onceFoldBtnLocal, onceCardLocal);
            }catch(_){}
          });
        }

        /* ★ OPEN/CLOSE の対象カード（指定4項目）をマーキングする
           - HTML文字列を直接いじらず、生成後DOMから「days/queue」のdetailsを特定
           - それぞれの親 .sync-card に sync-optional を付ける（CLOSE時に消える対象） */
        function markOptional(detailsEl){
          try{
            if (!detailsEl) return;
            const card = detailsEl.closest(".sync-card");
            if (card) {
              card.classList.add("sync-optional");
            }
          }catch(_){}
        }
        markOptional(daysDetails);
        markOptional(queueDetails);

        const daysOpen        = readLsBool(LS_DAYS_OPEN, false);        // デフォルト閉じ
        const queueOpen       = readLsBool(LS_QDEL_OPEN, false);        // デフォルト閉じ

        if (daysDetails)        daysDetails.open        = !!daysOpen;
        if (queueDetails)       queueDetails.open       = !!queueOpen;

        if (daysDetails) {
          daysDetails.addEventListener("toggle", function(){
            writeLsBool(LS_DAYS_OPEN, !!daysDetails.open);
          });
        }
        if (queueDetails) {
          queueDetails.addEventListener("toggle", function(){
            writeLsBool(LS_QDEL_OPEN, !!queueDetails.open);
          });
        }
      }catch(_){}

      const btnOk   = document.getElementById("cscs_sync_test_ok");
      const btnNg   = document.getElementById("cscs_sync_test_ng");

      if (btnOk)   btnOk.addEventListener("click", () => window.CSCS_SYNC.recordCorrect());
      if (btnNg)   btnNg.addEventListener("click", () => window.CSCS_SYNC.recordIncorrect());

      // ★ 処理: 「syncからデータを取得しない（NO-PULL）」モードを localStorage で永続化し、ボタンで切替
      //   - ON: initialFetch() を実行しない（sync/state を取りに行かない）
      //   - OFF: 通常通り initialFetch() で sync/state 取得を行う
      const LS_NO_PULL = "cscs_sync_a_no_pull_mode";
      const noPullBtn = box.querySelector('button[data-nopull-toggle="1"]');

      function refreshNoPullBtnLabel(){
        if (!noPullBtn) return;
        const on = (window.__cscs_sync_no_pull === true);
        noPullBtn.textContent = on ? "NO-PULL:ON" : "NO-PULL:OFF";
      }

      try{
        // ★ 処理: 起動時に localStorage から状態を復元し、グローバルフラグに反映する
        const on = readLsBool(LS_NO_PULL, false);
        window.__cscs_sync_no_pull = !!on;
        refreshNoPullBtnLabel();
      }catch(_){}

      if (noPullBtn) {
        noPullBtn.addEventListener("click", function(){
          try{
            // ★ 処理: クリックでON/OFFをトグルし、localStorageへ保存する
            const nextOn = !(window.__cscs_sync_no_pull === true);
            window.__cscs_sync_no_pull = nextOn;
            writeLsBool(LS_NO_PULL, nextOn);
            refreshNoPullBtnLabel();

            // ★ 処理: ONは「取得しない」ので状態だけ更新、OFFは即 pull する
            if (nextOn) {
              lastSyncStatus = "nopull";
              lastSyncTime   = new Date().toLocaleTimeString();
              lastSyncError  = "";
              updateMonitor();
            } else {
              initialFetch();
            }
          }catch(_){}
        });
      }

      // ============================================================
      // ★ 追加: 初回セット導線（最小仕様）
      // ------------------------------------------------------------
      //   ※実装本体は cscs_sync_bootstrap_a.js 側へ移設
      // ============================================================
      try{
        if (window.CSCS_SYNC_INIT_BIND_A_STRICT) {
          window.CSCS_SYNC_INIT_BIND_A_STRICT(box);
        }
      }catch(_){}
    }catch(_){}
    initialFetch();
  });

  window.addEventListener("online", function(){
    lastSyncStatus = "idle";
    sendDelta();
  });
  window.addEventListener("offline", function(){
    lastSyncStatus = "offline";
    updateMonitor();
  });
})();
```
<<<PART_END>>>
【RECEIPT_INPUT（このメッセージ内だけを真とする）】
EXPECTED_TOTAL: 5
RECEIVED_TOTAL: 5

CUMULATIVE_RECEIVED_PARTIDS:
- CSCSJS-EEA2D97C-P01-of-05
- CSCSJS-EEA2D97C-P02-of-05
- CSCSJS-EEA2D97C-P03-of-05
- CSCSJS-EEA2D97C-P04-of-05
- CSCSJS-EEA2D97C-P05-of-05

EXPECTED_PARTIDS_WITH_SHA256:
- CSCSJS-EEA2D97C-P01-of-05 | a837403a89ce1421c58571917c50ef93fcae40a6038b02acc52dbbbf14eba6ae
- CSCSJS-EEA2D97C-P02-of-05 | 2a946eca1c7b3f14caa7e37158bd50e0929f71a05364e836107cbdf29318b392
- CSCSJS-EEA2D97C-P03-of-05 | 18c3afdc7f049663349b749a926bf1a99ab731978d34f4d63b115546fc6ff585
- CSCSJS-EEA2D97C-P04-of-05 | 6953fa35273439cda39be541058e2dd5646aae85ef86fd606aaa522425861029
- CSCSJS-EEA2D97C-P05-of-05 | 7ee538a957ebafb361621a0c3be2cd05dac2bb5426ec9c9be48055aa26ebcef5

【ChatGPTへの強制ルール】
・受領確認は、このメッセージ内の CUMULATIVE_RECEIVED_PARTIDS と EXPECTED_PARTIDS のみを使用すること。
・会話履歴から PartID を再収集しないこと（禁止）。
・受領確認OK前に、コード内容の解釈・要約・推測・修正案提示をしないこと（禁止）。

RECEIPT_REQUIRED_RESPONSE_TEMPLATE:
ACK: <PartID> <PartSHA256_8> / WAITING_NEXT

【EXEC_TASK（このメッセージ内だけを真とする：唯一の実行指示）】
【WORK_HEADER（共通ID）】
[SESSION_ID: CSCSJS-EEA2D97C]
[REQUEST_ID: REQ-E5944A23]

【USER_INSTRUCTION】
この処理が今も有効なのか調べて欲しい


      // ★ 処理: 「syncからデータを取得しない（NO-PULL）」モードを localStorage で永続化し、ボタンで切替
      //   - ON: initialFetch() を実行しない（sync/state を取りに行かない）
      //   - OFF: 通常通り initialFetch() で sync/state 取得を行う
      const LS_NO_PULL = "cscs_sync_a_no_pull_mode";
      const noPullBtn = box.querySelector('button[data-nopull-toggle="1"]');

      function refreshNoPullBtnLabel(){
        if (!noPullBtn) return;
        const on = (window.__cscs_sync_no_pull === true);
        noPullBtn.textContent = on ? "NO-PULL:ON" : "NO-PULL:OFF";
      }

      try{
        // ★ 処理: 起動時に localStorage から状態を復元し、グローバルフラグに反映する
        const on = readLsBool(LS_NO_PULL, false);
        window.__cscs_sync_no_pull = !!on;
        refreshNoPullBtnLabel();
      }catch(_){}

      if (noPullBtn) {
        noPullBtn.addEventListener("click", function(){
          try{
            // ★ 処理: クリックでON/OFFをトグルし、localStorageへ保存する
            const nextOn = !(window.__cscs_sync_no_pull === true);
            window.__cscs_sync_no_pull = nextOn;
            writeLsBool(LS_NO_PULL, nextOn);
            refreshNoPullBtnLabel();

            // ★ 処理: ONは「取得しない」ので状態だけ更新、OFFは即 pull する
            if (nextOn) {
              lastSyncStatus = "nopull";
              lastSyncTime   = new Date().toLocaleTimeString();
              lastSyncError  = "";
              updateMonitor();
            } else {
              initialFetch();
            }
          }catch(_){}
        });
      }

【SCOPE_INDEX（連結後JSの探索用索引）】
・この索引は、分割前の元JS全文（= 連結後JS）から抽出しています。
・まずここを見て「存在する/しない」を確定し、不要な全文探索や見落としを減らしてください。
・識別子だけでなく DOM/selector/storage key も含めています。

【SUMMARY】
TOTAL_IDENTIFIERS_UNIQ: 1014
TOTAL_DOM_IDS_UNIQ: 5
TOTAL_DOM_CLASSES_UNIQ: 0
TOTAL_DOM_NAMES_UNIQ: 0
TOTAL_SELECTORS_UNIQ: 69
TOTAL_LOCALSTORAGE_KEYS_UNIQ: 9
TOTAL_SESSIONSTORAGE_KEYS_UNIQ: 0

【IDENTIFIERS_TOP_FREQUENT（頻出上位）】
- sync (326)
- div (272)
- qid (271)
- QID (243)
- SYNC (220)
- A (172)
- s (168)
- console (156)
- state (149)
- localStorage (143)
- span (121)
- String (114)
- v (110)
- queue (103)
- once (102)
- window (101)
- log (101)
- ok (96)
- NO (93)
- day (91)
- value (88)
- e (87)
- box (87)
- local (86)
- error (81)
- FALLBACK (73)
- querySelector (72)
- textContent (70)
- oncePerDayToday (69)
- cscs_sync_monitor_a (68)
- _ (64)
- grid (61)
- key (60)
- streak3Today (60)
- object (60)
- n (57)
- missing (57)
- __cscs_sync_state (57)
- Object (56)
- streak3WrongToday (55)
- wrong (54)
- mapKey (50)
- raw (49)
- server (49)
- card (49)
- trim (47)
- label (47)
- json (46)
- font (46)
- val (45)
- call (44)
- prototype (43)
- hasOwnProperty (43)
- headers (43)
- number (42)
- mini (42)
- correct (41)
- unique_count (41)
- undefined (41)
- LS (40)
- X (38)
- Number (38)
- isFinite (38)
- delta (37)
- k (37)
- toDisplayText (36)
- unknown (35)
- CSCS (34)
- max (33)
- display (33)
- lastday (33)
- merge (28)
- streak3 (28)
- message (28)
- r (28)
- api (27)
- setItem (27)
- now (27)
- results (26)
- d (26)

【IDENTIFIERS_ALL（ユニーク識別子一覧）】
- A
- ALREADY
- ALREADY_MEASURED_TODAY
- API
- Array
- BODY
- CF
- CLOSE
- CMP
- COMPLETED
- CSCS
- CSCS_ODOA_MODE
- CSCS_SYNC
- CSCS_SYNC_INIT_BIND_A_STRICT
- CSCS_SYNC_KEY
- CSCS_VERIFY_MODE
- Cache
- Colo
- Content
- Count
- CustomEvent
- D
- DOM
- DOMContentLoaded
- Date
- DayDelta
- Days
- ERR
- ERROR
- Error
- Event
- FAILED
- FALLBACK
- GET
- HDR
- HH
- INCOMPLETE
- INFO
- JSON
- JST
- KV
- Key
- LS
- LS_DAYS_OPEN
- LS_MON_OPEN
- LS_NO_PULL
- LS_ONCE_OPEN_LOCAL
- LS_ONCE_OPEN_SYNC
- LS_QDEL_OPEN
- LastCorrect
- LastSeen
- LastWrong
- LocalStorage
- MERGE
- MM
- Math
- Mode
- NNN
- NO
- NOT
- NOT_MEASURED_TODAY
- NO_PULL_MODE
- NaN
- No
- Number
- O
- ODOA
- ODOA_MODE_UNKNOWN
- ODOA_OFF
- OFF
- OK
- ON
- ONCEPERDAY_STATE_UNAVAILABLE
- OPEN
- OVERWRITE
- Object
- OdoaMode
- OncePerDayToday
- POST
- PULL
- Progress
- Promise
- QID
- QUEUE
- Queue
- RESET
- Ray
- Roboto
- SS
- START
- STATE
- SYNC
- SYNC_BOOTSTRAP_PROMISE_REJECTED_
- SYNC_KEY_MISSING_AFTER_BOOTSTRAP
- SYNC_KEY_MISSING_LOCAL
- SYNC_KEY_NOT_READY
- SYNC_STATE_HTTP_
- Segoe
- Status
- Streak3Today
- Streak3TodayUnique
- Streak3WrongToday
- Streak3WrongTodayUq
- String
- Today
- Token
- Totals
- Type
- UI
- User
- VERIFY
- VERIFY_MODE
- Worker
- Workers
- X
- YES
- YYYYMMDD
- Yes
- _
- __CSCS_SYNC_KEY_PROMISE__
- __cscs_sync_last_headers
- __cscs_sync_no_pull
- __cscs_sync_state
- _a
- _build_cscs_
- _e
- _eDate
- _eOdoa
- _eOnce
- a
- a_len
- a_max
- a_maxday
- active
- add
- addEventListener
- addYesNo
- alert
- align
- all
- anyDiff
- api
- appearance
- appendChild
- apple
- application
- applied
- assets
- async
- auto
- b_judge_record
- background
- baseline
- before
- bestNum
- bestType
- between
- block
- body
- boolVal
- bootstrap
- border
- bottom
- box
- br
- btn
- btnNg
- btnOk
- button
- c
- cL
- cS
- cText
- call
- canDisplay
- canDisplayQidNumbers
- canSyncQidNumbers
- card
- center
- cf
- check
- child
- classList
- cleanup
- clear
- clearTimeout
- cleared
- click
- closed
- closest
- collapsed
- colo
- color
- column
- columns
- compact
- compare
- completed
- computed
- consider
- console
- contains
- content
- correct
- correctDay
- correctDelta
- correctInfo
- correctIsEmpty
- correctKeysLen
- correctRows
- correctTotal
- correct_star
- countLabel
- countType
- counted
- createElement
- credentials
- cscs
- cscs_correct_streak3_log
- cscs_exam_date
- cscs_fav
- cscs_fav_map
- cscs_once_per_day_today_day
- cscs_once_per_day_today_results
- cscs_q_correct_streak3_total
- cscs_q_correct_streak_len
- cscs_q_correct_streak_max
- cscs_q_correct_streak_max_day
- cscs_q_correct_total
- cscs_q_last_correct_day
- cscs_q_last_seen_day
- cscs_q_last_wrong_day
- cscs_q_wrong_streak3_total
- cscs_q_wrong_streak_len
- cscs_q_wrong_streak_max
- cscs_q_wrong_streak_max_day
- cscs_q_wrong_total
- cscs_results
- cscs_streak3_today_day
- cscs_streak3_today_qids
- cscs_streak3_today_unique_count
- cscs_streak3_wrong_today_day
- cscs_streak3_wrong_today_qids
- cscs_streak3_wrong_today_unique_count
- cscs_sync_a
- cscs_sync_a_days_open
- cscs_sync_a_monitor_open
- cscs_sync_a_no_pull_mode
- cscs_sync_a_onceperday_open_local
- cscs_sync_a_onceperday_open_sync
- cscs_sync_a_queue_detail_open
- cscs_sync_bootstrap_a
- cscs_sync_key
- cscs_sync_last_c
- cscs_sync_last_s3
- cscs_sync_last_w
- cscs_sync_monitor_a
- cscs_sync_test_ng
- cscs_sync_test_ok
- cscs_sync_totals
- cscs_wrong_log
- ctx
- currentLen
- currentLenWrong
- cursor
- cw
- d
- dC
- dI
- data
- dataset
- day
- dayType
- day_invalid
- days
- daysDetails
- daysOpen
- dd
- debug
- decoration
- defaultBool
- delta
- detail
- details
- detailsEl
- detectQidFromLocationA
- diff
- dispatchEvent
- display
- div
- doFetch
- document
- documentElement
- done
- ds
- e
- eAdd
- eCmp
- eCorrect
- eMax
- eOnceSync
- eS3t
- eS3wt
- eSync
- eWait
- earned
- eee
- el
- ellipsis
- email
- empty
- emptyLabel
- en
- enabled
- end
- endpoint
- ensureSyncKeyReady
- entry
- err
- errText
- error
- ev
- event
- exception
- failed
- failedKeys
- fallback
- fetch
- fetchServer
- fetched
- fff
- fields
- filter
- filtered
- fixed
- flex
- fold
- font
- forEach
- from
- g
- gap
- get
- getDate
- getElementById
- getFullYear
- getItem
- getMonth
- getTodayYmdNum
- globalKeys
- gotType
- grid
- guard
- had
- hasC
- hasCorrect
- hasCorrectDelta
- hasCorrectMap
- hasDC
- hasDI
- hasDay
- hasEntry
- hasI
- hasIncorrect
- hasIncorrectDelta
- hasLastCorrect
- hasLastCorrectDay
- hasLastCorrectDayDelta
- hasLastSeen
- hasLastSeenDay
- hasLastSeenDayDelta
- hasLastWrong
- hasLastWrongDay
- hasLastWrongDayDelta
- hasObj
- hasOnce
- hasOwnProperty
- hasQdS3
- hasQdS3W
- hasQids
- hasS3
- hasS3W
- hasSL
- hasSLW
- hasState
- hasStreak3
- hasStreak3Delta
- hasStreak3Today
- hasStreak3Wrong
- hasStreak3WrongDelta
- hasStreak3WrongToday
- hasStreakLen
- hasStreakLenDelta
- hasStreakWrongLen
- hasStreakWrongLenDelta
- hasUniqueCount
- head
- header
- headers
- headline
- height
- hidden
- hide
- hideCorrect
- hideWrong
- hit
- html
- i
- iText
- id
- idle
- important
- include
- incomplete
- incorrect
- incorrectDelta
- incremented
- index
- indexOf
- init
- initialFetch
- inline
- innerHTML
- inset
- invalid
- is
- isArray
- isFinite
- isOpen
- isToday
- isTodayOnce
- isTodayYmdString
- iso
- istoday
- items
- j
- js
- json
- justify
- k
- kC
- kCor
- kCorLast
- kCorNow
- kD
- kL
- kM
- kS
- kSeen
- kStreakLastS3
- kStreakLen
- kStreakTotal
- kW
- kWrg
- kWrgLast
- kWrgNow
- key
- keyName
- keys
- keysLen
- lEl
- lMax
- lMaxDay
- lWrongMax
- lWrongMaxDay
- label
- last
- lastCorrect
- lastCorrectDay
- lastCorrectDayDelta
- lastCorrectLocal
- lastCorrectLocalEl
- lastCorrectSync
- lastCorrectSyncEl
- lastRecordedDay
- lastRecordedDayIso
- lastSeen
- lastSeenDay
- lastSeenDayDelta
- lastSeenLocal
- lastSeenLocalEl
- lastSeenSync
- lastSeenSyncEl
- lastSyncError
- lastSyncStatus
- lastSyncTime
- lastWrong
- lastWrongDay
- lastWrongDayDelta
- lastWrongLocal
- lastWrongLocalEl
- lastWrongSync
- lastWrongSyncEl
- lastcorrect
- lastday
- lastdaySummaryLocalEl
- lastdaySummarySyncEl
- lastdaySummaryTypeEl
- lastseen
- lastwrong
- latest
- latestLocalVal
- latestSyncVal
- latestType
- lc
- lcText
- ld
- len
- length
- letter
- li
- liText
- line
- line1
- line2
- line3
- line4
- list
- ll
- llWrong
- local
- localDayNum
- localOnceDayRaw
- localProgress
- localResults
- localStorage
- localStreak
- localStreakCount
- localStreakDay
- localStreakDayRaw
- localTotals
- localWrongProgress
- localWrongStreak3Total
- localWrongStreakCount
- localWrongStreakDay
- localWrongStreakDayRaw
- localWrongStreakLen
- location
- log
- logKey
- loggedStreakMaxUiOnce
- loggedWrongStreakMaxUiOnce
- loggedWrongStreakUiOnce
- loggedWrongStreakUiPolicy
- ls
- lsWrong
- m
- map
- mapKey
- margin
- markOptional
- marker
- match
- max
- maxDay
- max_day
- maxday
- measured
- measuredResult
- measuredToday
- media
- merge
- mergeHeaders
- merged
- message
- method
- mh
- min
- mini
- minmax
- miss
- missing
- missing_map
- missing_qid_entry
- mm
- monitor
- monitorOpen
- mv
- n
- name
- names
- nav
- navigator
- nextOn
- nextOpen
- no
- noPullBtn
- none
- nopull
- normal
- not
- now
- nowType
- nowValue
- nowrap
- nth
- nulls
- num3
- number
- numbers
- numeric
- nums
- oa_mode
- object
- od
- odoaLabel
- odoaMode
- odoaText
- odoa_mode
- off
- offline
- offset
- ok
- okCount
- okDay
- okQids
- okResults
- on
- onLine
- onReady
- once
- onceCardLocal
- onceCardSync
- onceDay
- onceDayIsTodayEl
- onceDayIso
- onceDayLocalEl
- onceDayNum
- onceDaySyncEl
- onceElLocal
- onceElSync
- onceFoldBtnLocal
- onceFoldBtnSync
- onceLabel
- onceLogPayload
- onceObj
- onceOpenLocal
- onceOpenSync
- oncePerDay
- oncePerDayToday
- onceResult
- onceperday
- online
- only
- opacity
- open
- optional
- or
- overflow
- overwrite
- p
- padding
- parse
- parseInt
- parsed
- partial
- pathname
- payload
- pickLatestType
- pointer
- position
- prefixes
- prepare
- progress
- prototype
- pull
- pulled
- push
- q
- qEl
- qdCor
- qdCorEl
- qdCwEl
- qdEl
- qdS3
- qdS3El
- qdS3W
- qdS3wEl
- qdSL
- qdSLW
- qdSLel
- qdSLwEl
- qdSeen
- qdSeenEl
- qdWrg
- qdWrgEl
- qid
- qidHasEntry
- qidValue
- qids
- qidsIsArray
- qidsLen
- querySelector
- querySelectorAll
- queue
- queueDetails
- queueOpen
- queued
- r
- radius
- raw
- rawCor
- rawDay
- rawLocalCnt
- rawLocalWrongCnt
- rawRes
- rawSeen
- rawWrg
- ray
- rc
- read
- readDatasetNonNegIntOrNull
- readHeaderAny
- readHeaderStrict
- readLocalLastCorrectDayForQid
- readLocalLastSeenDayForQid
- readLocalLastWrongDayForQid
- readLocalStreak3ForQid
- readLocalStreakLenForQid
- readLocalStreakMaxDayForQid
- readLocalStreakMaxForQid
- readLocalTotalsForQid
- readLocalWrongStreak3ForQid
- readLocalWrongStreakLenForQid
- readLocalWrongStreakMaxDayForQid
- readLocalWrongStreakMaxForQid
- readLsBool
- readLsNonNegIntOrNull
- readMapNumberStrict
- readStateMapDayStrictForLs
- readStateMapNumberStrict
- readStateMapNumberStrictForLs
- ready
- reason
- reasonLabel
- reasons
- recordCorrect
- recordIncorrect
- recordStreak3
- recordStreakLen
- recordWrongStreak3
- recordWrongStreakLen
- refreshNoPullBtnLabel
- refreshOnceFoldBtnLabel
- refreshToggleBtnLabel
- reject
- remove
- removeEventListener
- removeItem
- removedKeys
- removedLocalKeys
- rendered
- repeat
- replace
- res
- reset
- resetAllQidSyncAndLocal
- resetOncePerDayTodayAll
- resetStar
- resetStarForThisQid
- resetStreak3TodayAll
- resetSyncForThisQid
- reset_all_qid
- reset_once_per_day_today
- reset_qid
- reset_streak3_qid
- reset_streak3_today
- resolve
- response
- results
- resultsKeys
- resultsType
- rgba
- ri
- right
- row
- rs3
- rs3w
- rsl
- rslw
- s
- s3
- s3El
- s3sEl
- s3tDayEl
- s3tDayIsTodayEl
- s3tDayLocalEl
- s3tDaySyncEl
- s3tLocalEl
- s3tSyncEl
- s3w
- s3wEl
- s3wsEl
- s3wtDayEl
- s3wtDayIsTodayEl
- s3wtDayLocalEl
- s3wtDaySyncEl
- s3wtLocalEl
- s3wtSyncEl
- s8
- sLen
- sMax
- sMaxDay
- sWrongMax
- sWrongMaxDay
- same
- sans
- sc
- scheduleSend
- seen
- seenDay
- select
- selected
- sendDelta
- sendTimer
- sending
- serif
- server
- serverC
- serverI
- serverProgress
- serverS3
- serverSL
- serverTextEl
- serverWrongProgress
- serverWrongStreak3Total
- serverWrongStreakLen
- set
- setItem
- setServerTotalsForQid
- setTimeout
- sh
- shadow
- show
- showAlert
- shows
- si
- size
- skip
- skipped
- sl
- slEl
- slWrong
- slice
- slides
- sllProgEl
- sllwProgEl
- slsEl
- slsProgEl
- slw
- slwEl
- slwsEl
- slwsProgEl
- snapshot
- solid
- space
- spacing
- span
- src
- ss
- ssWrong
- st
- stEl
- stars
- state
- stateFetchHeaders
- stateForLast
- stateForOnceDay
- stateHeaders
- status
- streak
- streak3
- streak3Correct
- streak3Delta
- streak3Today
- streak3TodayCountForUi
- streak3TodayDayForUi
- streak3TodayDelta
- streak3Wrong
- streak3WrongDelta
- streak3WrongToday
- streak3WrongTodayCountForUi
- streak3WrongTodayDayForUi
- streak3WrongTodayDelta
- streak3today
- streak3wrongtoday
- streakLen
- streakLenCorrect
- streakLenDelta
- streakLenWrong
- streakMax
- streakMaxDay
- streakMaxDayDelta
- streakMaxDayEl
- streakMaxDaySyncEl
- streakMaxDelta
- streakMaxLenEl
- streakMaxLenSyncEl
- streakMaxValEl
- streakMaxValSyncEl
- streakWrongLen
- streakWrongLenDelta
- streakWrongMax
- streakWrongMaxDay
- streakWrongMaxDayDelta
- streakWrongMaxDelta
- streak_len
- streak_max
- streaklen
- streakmax
- string
- stringify
- style
- summary
- sv
- sync
- syncKey
- syncKeyReady
- syncOnceDayRaw
- synced
- system
- t
- t2
- tabular
- template
- test
- text
- textContent
- then
- time
- title
- to
- toDisplayText
- toLocaleTimeString
- today
- todayYmd
- toggle
- toggleBtn
- top
- totals
- totalsEl
- transform
- translateY
- transparent
- trim
- trunc
- ts
- type
- type_invalid
- ui
- undefined
- underline
- unique
- unique_count
- unknown
- update
- updateMonitor
- updated
- updatedAt
- user
- v
- v2
- v3
- v4
- vCor
- vSeen
- vWrg
- val
- valid
- value
- valueType
- variant
- verifyModeOn
- w
- wL
- wS
- w_len
- w_max
- w_maxday
- warn
- webkit
- weight
- white
- wide
- width
- will
- window
- word
- wrap
- write
- writeLsBool
- writeLsStrictDay
- writeLsStrictNumber
- wrong
- wrongDay
- wrongRows
- wrongStreakLen
- wrongStreakMax
- wrongStreakMaxDay
- wrongStreakMaxDayEl
- wrongStreakMaxDaySyncEl
- wrongStreakMaxLenEl
- wrongStreakMaxLenSyncEl
- wrongStreakMaxValEl
- wrongStreakMaxValSyncEl
- wrongTotal
- wrote
- ymdNum
- ymdNumToIso
- ymdStr
- ymdStrToIso
- ymdToNum8
- yy
- z

【DOM_IDS（getElementById の文字列）】
- cscs-sync-a-monitor-style
- cscs_sync_monitor_a
- cscs_sync_test_ng
- cscs_sync_test_ok
- cscs_sync_totals

【DOM_CLASSES（getElementsByClassName の文字列）】

【DOM_NAMES（getElementsByName の文字列）】

【SELECTORS（querySelector/querySelectorAll の文字列）】
- .correct_star
- .lastday-grid .ld-row-lastcorrect
- .lastday-grid .ld-row-lastwrong
- .sync-card.once-card.once-card-local
- .sync-card.once-card.once-card-sync
- .sync-last-correct-local
- .sync-last-correct-sync
- .sync-last-seen-local
- .sync-last-seen-sync
- .sync-last-wrong-local
- .sync-last-wrong-sync
- .sync-lastday-summary-local
- .sync-lastday-summary-sync
- .sync-lastday-summary-type
- .sync-local
- .sync-onceperday-day-istoday
- .sync-onceperday-day-local
- .sync-onceperday-day-sync
- .sync-onceperday.local
- .sync-onceperday.sync
- .sync-qid
- .sync-queue
- .sync-queue-cw
- .sync-queue-lastcorrect
- .sync-queue-lastseen
- .sync-queue-lastwrong
- .sync-queue-s3
- .sync-queue-s3w
- .sync-queue-sl
- .sync-queue-slw
- .sync-server-text
- .sync-status
- .sync-streak3-server
- .sync-streak3-val
- .sync-streak3today-day
- .sync-streak3today-day-istoday
- .sync-streak3today-day-local
- .sync-streak3today-day-sync
- .sync-streak3today-local
- .sync-streak3today-sync
- .sync-streak3wrongtoday-day
- .sync-streak3wrongtoday-day-istoday
- .sync-streak3wrongtoday-day-local
- .sync-streak3wrongtoday-day-sync
- .sync-streak3wrongtoday-local
- .sync-streak3wrongtoday-sync
- .sync-streaklen-local-progress
- .sync-streaklen-server
- .sync-streaklen-server-progress
- .sync-streaklen-val
- .sync-streakmax-len-local
- .sync-streakmax-len-sync
- .sync-streakmax-max-local
- .sync-streakmax-max-sync
- .sync-streakmax-maxday-local
- .sync-streakmax-maxday-sync
- .sync-wrong-streak3-server
- .sync-wrong-streak3-val
- .sync-wrong-streaklen-local-progress
- .sync-wrong-streaklen-server
- .sync-wrong-streaklen-server-progress
- .sync-wrong-streaklen-val
- .sync-wrong-streakmax-len-local
- .sync-wrong-streakmax-len-sync
- .sync-wrong-streakmax-max-local
- .sync-wrong-streakmax-max-sync
- .sync-wrong-streakmax-maxday-local
- .sync-wrong-streakmax-maxday-sync
- div.wrap

【LOCALSTORAGE_KEYS】
- cscs_once_per_day_today_day
- cscs_once_per_day_today_results
- cscs_streak3_today_day
- cscs_streak3_today_qids
- cscs_streak3_today_unique_count
- cscs_streak3_wrong_today_day
- cscs_streak3_wrong_today_qids
- cscs_streak3_wrong_today_unique_count
- cscs_sync_key

【SESSIONSTORAGE_KEYS】

【出力仕様（パッチ規約：厳守）】
- 参照元のコードから「確実に検索できる」形で提示すること（検索しやすい連続行を含める）
- 必ず参照元と「同じインデント」で提示すること
- 「置換前／置換後」を明確に分けること（それぞれ別のコードブロック）
- 「...」「（中略）」「省略」などの省略表現は禁止（置換対象行は省略なし）
- 出力は「フル」ではなく「置換部分のみ」
- 置換前コードブロック内に「参照元本文に無いコメント」を追加しないこと
- フォールバックの設定・保険・自動互換コードの追加は基本的に禁止（必要なら理由と影響を明示して停止し確認を取る）
- 追加した処理には、処理ごとに『何をしているか』の補足コメントを置換後側に入れること

【ChatGPT 実行ルール（強制）】
・RECEIPT_CHECK: OK の場合、実行対象は上記 EXEC_TASK のみ。別の問題分析や一般論は禁止。
・SCOPE_CHECK は原則として OK / WARN の2段階のみ（FAIL を返して停止することは禁止）。
・識別子/DOM/関数が『SCOPE_INDEX に見当たらない』場合でも、ただちに停止しない。まず次を必ず実施する：
  1) SCOPE_INDEX の確認（スペル違い/大文字小文字/略称を含め再確認）
  2) 受領した各パート本文の範囲で全文検索（Partごとの PART_SCOPE_HINT も活用）
  3) 近似一致の探索（例：大小文字差 / _-差 / 前後の接頭辞差）を試し、最も近い候補を採用する
  4) EXEC_TASK は『可能な範囲で推測して前進』する（作業を止めない）
・見つからない場合は SCOPE_CHECK: WARN を返し、次を必ず出力する：
  - NOT_FOUND: 見つからなかった識別子/DOM/関数（名称をそのまま列挙）
  - SEARCHED_IN: 検索した範囲（SCOPE_INDEX / PartID一覧 / 具体的キーワード）
  - INFERRED_ACTION: 推測で行った判断（どの候補に寄せたか / どこに挿入したか）
  - EXEC_CONTINUED: 続行できた作業内容（未実施があれば『未実施』として明示）
  - USER_EXTRACT_REQUEST: 次の4項目を、ユーザーが『元のJS』から抽出して提示するよう要求する（この4項目のみ例外的に要求を許可）
    * EXTRACT_SYMBOLS: 抽出したい関数名/識別子（カンマ区切り）
    * EXTRACT_NEEDLES: 抽出したい検索語（カンマ区切り）
    * PURPOSE: 抽出の目的（1行）
    * DEPENDS: 依存関数/依存データの存在列挙（カンマ区切り）
    （追加した処理: WARN時にユーザーへ extract 実行を誘導し、必要メタ4項目の“値”を確実に回収する）
・重要：SCOPE_CHECK: WARN でも『ユーザーへ追加情報を要求する行為』は禁止。
  （追加した処理: ただし EXTRACT_SYMBOLS / EXTRACT_NEEDLES / PURPOSE / DEPENDS の4項目の提示要求だけは例外として許可する）
・重要：SCOPE_CHECK: WARN の場合でも、最終アウトプットは必ず提示する（停止しない）。

【分割コード(5)の終了】→ これで最後です（全5分割）

【分割終了宣言】
これで分割コードは最後です。直後の RECEIPT_INPUT（このメッセージ内）を用いて受領確認を実施してください。

【ChatGPTへの最終手順（強制）】
1) このメッセージ内の CUMULATIVE_RECEIVED_PARTIDS を受領一覧として採用する（会話履歴参照は禁止）。
2) このメッセージ内の EXPECTED_PARTIDS と照合し、欠落/重複/不一致を判定する。
3) 判定結果を以下の形式で必ず返す：
   RECEIPT_CHECK: OK もしくは NG
   RECEIPT_MISSING: （不足があれば列挙、なければ EMPTY）
   RECEIPT_DUPLICATE: （重複があれば列挙、なければ EMPTY）
   RECEIPT_MISMATCH: （不一致があれば列挙、なければ EMPTY）

4) 重要：RECEIPT_CHECK: OK の場合、同じ返答の中で必ず続けて次も出力し、直ちに実行する：
   JOIN_READY: YES
   JOIN_ACTION: P01→P02→...→Pn の順に全パートを連結して完全なJSを構築する
   EXEC_START: このメッセージ内の EXEC_TASK（唯一の実行指示）を完全なJSに対して実行し、結果を提示する

5) 重要：RECEIPT_CHECK: NG の場合、同じ返答の中で必ず続けて次も出力して終了する：
   JOIN_READY: NO
   RESEND_REQUEST: 不足/重複/不一致の PartID をそのまま列挙して再送要求する
   EXEC_START: BLOCKED

【禁止事項（再掲）】
・受領確認OK前に、コードの要約/推測/修正提案/作業開始をしない。
・RECEIPT_CHECK: OK の場合でも、上記の JOIN_READY/JOIN_ACTION/EXEC_START を同じ返答で出す前に止まらない。
・実行根拠は最終メッセージ内 EXEC_TASK のみ。PART_01の文を理由に別作業を開始しない。

