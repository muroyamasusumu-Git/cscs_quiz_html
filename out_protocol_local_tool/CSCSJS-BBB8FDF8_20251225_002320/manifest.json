{
  "session_id": "CSCSJS-BBB8FDF8",
  "created_at": "2025-12-25T00:23:20",
  "instruction": "<<<EXTRACT_BEGIN>>>\nFILE: cscs_sync_view_b.js\nPURPOSE:\n  Bパート用SYNCビューHUD（パネルUI）。/api/sync/state 等の SYNC 状態と localStorage のローカル計測を統合し、\n  Totals/3連続/Today Unique/最大連続/OncePerDay+ODOA/LastDay/Pending（未送信＋qids差分）を可視化する。\n\nDEPENDS:\n  - DOM:\n      #cscs_sync_view_b_body（描画先）\n      #cscs_sync_view_b_status（ODOAステータス表示）\n  - CSS classes:\n      .cscs-svb-card, .is-wide, .cscs-svb-card-title, .cscs-svb-card-grid\n      .svb-once-odoa-card, .svb-once-odoa-card-local\n      .svb-streak-quad, .svb-lastday-*, .svb-pending-*, .svb-wide-*\n  - Helpers / symbols:\n      appendGridRow(...)\n      readIntFromLocalStorage(...)\n      readDayFromLocalStorage(...)\n      info.qid\n  - Globals:\n      window.__cscs_sync_state（SYNC stateキャッシュ）\n      window.CSCS_VERIFY_MODE（VERIFYガード）\n      window.CSCS_ODOA_MODE（ODOA ON/OFF参照元）\n      LAST_ODOA_STATUS（ODOA表示のkeep用）\n  - localStorage keys（読み出し前提）:\n      cscs_sync_view_b_once_odoa_collapsed\n      cscs_sync_view_b_pending_collapsed\n      cscs_streak3_today_day / cscs_streak3_today_unique_count / cscs_streak3_today_qids\n      cscs_streak3_wrong_today_day / cscs_streak3_wrong_today_unique_count / cscs_streak3_wrong_today_qids\n      cscs_q_last_seen_day:{qid} / cscs_q_last_correct_day:{qid} / cscs_q_last_wrong_day:{qid}\n      cscs_q_correct_streak_max:{qid} / cscs_q_correct_streak_max_day:{qid}\n      cscs_q_wrong_streak_max:{qid} / cscs_q_wrong_streak_max_day:{qid}\n      cscs_q_wrong_streak3_total:{qid} / cscs_q_wrong_streak_len:{qid}\n\nSYMBOLS:\n  - clearSyncBody:\n      PURPOSE:\n        再描画時に #cscs_sync_view_b_body を掃除。ただしちらつき防止のため\n        .svb-once-odoa-card（先頭1枚=SYNC想定）と .svb-once-odoa-card-local の2枚は残し、それ以外を削除。\n      DEPENDS:\n        #cscs_sync_view_b_body / .svb-once-odoa-card / .svb-once-odoa-card-local\n\n  - updateSyncBodyGrid(model):\n      PURPOSE:\n        model からHUDカード群を生成して body に描画（Totals→3連続→Today Unique→最大連続→Once/ODOA→LastDay→Pending）。\n        折りたたみ状態を localStorage に永続化し、Pending では today系qidsの local-only 差分も可視化。\n      DEPENDS:\n        clearSyncBody(), updateSyncBodyText(), appendGridRow(), localStorage(collapsed), window.__cscs_sync_state, info.qid, CSS classes\n\n  - updateSyncBodyText(text):\n      PURPOSE:\n        エラー時などに Status カード1枚でメッセージ表示。\n      DEPENDS:\n        clearSyncBody(), #cscs_sync_view_b_body, CSS classes\n\n  - renderPanel(box, payload):\n      PURPOSE:\n        payload + window.__cscs_sync_state + localStorage から HUD表示用modelを組み立て updateSyncBodyGrid() に渡す。\n        併せて #cscs_sync_view_b_status に ODOAステータスを表示（payload \"__keep__\" 対応）。\n      DEPENDS:\n        updateSyncBodyGrid(), updateSyncBodyText(), readIntFromLocalStorage(), readDayFromLocalStorage(),\n        window.__cscs_sync_state, window.CSCS_VERIFY_MODE, window.CSCS_ODOA_MODE, LAST_ODOA_STATUS, info.qid,\n        #cscs_sync_view_b_status\n<<<EXTRACT_END>>>",
  "input": {
    "filename": "cscs_sync_view_b.js",
    "size_chars": 159195,
    "sha256": "bbb8fdf8250239d34b3ecd460a7710239c45cbb19bea6cf29bfbdff8af4fd177",
    "saved_copy": "original/cscs_sync_view_b.js"
  },
  "split": {
    "total_parts": 4,
    "max_chars_per_part": 60000,
    "max_lines_per_part": 1200,
    "strategy": "split_on_newline_preferably_else_hard"
  },
  "parts": [
    {
      "index": 1,
      "total": 4,
      "part_id": "CSCSJS-BBB8FDF8-P01-of-04",
      "part_sha256": "0dc4063964fbd56bb71979463ed46d19f959634f4f50ee6390b2e50df566f3b5",
      "start_offset": 0,
      "end_offset": 37325,
      "len_chars": 37325,
      "file": "parts/part_01.txt"
    },
    {
      "index": 2,
      "total": 4,
      "part_id": "CSCSJS-BBB8FDF8-P02-of-04",
      "part_sha256": "a8504262b9621c79c96918f46d6c83c2250a3a9c2f1d9377bb2f6de1fd61493e",
      "start_offset": 37325,
      "end_offset": 82129,
      "len_chars": 44804,
      "file": "parts/part_02.txt"
    },
    {
      "index": 3,
      "total": 4,
      "part_id": "CSCSJS-BBB8FDF8-P03-of-04",
      "part_sha256": "c64b6174afa5a4b115839fef42bfb3f40a4a0f2a781a1b3194d0d061e2bcfc2f",
      "start_offset": 82129,
      "end_offset": 129585,
      "len_chars": 47456,
      "file": "parts/part_03.txt"
    },
    {
      "index": 4,
      "total": 4,
      "part_id": "CSCSJS-BBB8FDF8-P04-of-04",
      "part_sha256": "77dd3efb5af023113a2ae92d33a831a98c409b28a084566f142b0fb6eba71dbb",
      "start_offset": 129585,
      "end_offset": 159195,
      "len_chars": 29610,
      "file": "parts/part_04.txt"
    }
  ]
}