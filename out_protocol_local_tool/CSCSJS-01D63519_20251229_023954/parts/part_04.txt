<<<PART_BEGIN>>>
ã€åˆ†å‰²ã‚³ãƒ¼ãƒ‰(4)ã®é–‹å§‹ã€‘
PartID: CSCSJS-01D63519-P04-of-04
PartSHA256: 8cca952b47ea8c075063b42d022cfaa1ddae9c3661c166abffa8bbde3bdcaacf
Range: chars 127280..148361 (len=21081)
FirstLine: 
LastLine: })();
EndNewline: NO

```javascript

/* ============================================================
   â˜… OncePerDayToday / O.D.O.A Mode æŠ˜ã‚ŠãŸãŸã¿ï¼ˆã‚«ãƒ¼ãƒ‰å˜ä½“ï¼‰
   ------------------------------------------------------------
   - è¦‹å‡ºã—å³ç«¯ã«ã€Œâ–¶show / â–¼hideã€ãƒ†ã‚­ã‚¹ãƒˆãƒœã‚¿ãƒ³
   - æŠ˜ã‚ŠãŸãŸã¿æ™‚ã¯ã€Œè¦‹å‡ºã— + 3è¡Œç›®ï¼ˆcountå¯¾è±¡ï¼‰ã€ã ã‘è¡¨ç¤º
   ============================================================ */
#cscs_sync_monitor_a .sync-card.once-card .sync-title{
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
}

#cscs_sync_monitor_a .once-fold-btn{
  appearance: none;
  border: none;
  background: transparent;
  color: rgba(255,255,255,0.86);
  font-weight: 700;
  font-size: 10.5px;
  line-height: 1;
  padding: 0;
  cursor: pointer;
  opacity: 0.92;
  white-space: nowrap;
}

#cscs_sync_monitor_a .once-fold-btn:active{
  transform: translateY(1px);
}

#cscs_sync_monitor_a .sync-nopull-btn {
    font-size: 9px;
    font-weight: 800;
    opacity: 0.7;
    text-shadow: none !impotant;
}
/* æŠ˜ã‚ŠãŸãŸã¿æ™‚ï¼šonce-grid ã®ã†ã¡ã€Œ3è¡Œç›®ï¼ˆcountå¯¾è±¡ï¼‰ã€ã ã‘æ®‹ã™
   once-grid ã®å­è¦ç´ ã¯ 8å€‹ï¼ˆlabel/val Ã—4è¡Œï¼‰
   3è¡Œç›®ã¯ 5ç•ªç›®(label) ã¨ 6ç•ªç›®(val) */
#cscs_sync_monitor_a .sync-card.once-card.once-collapsed .once-grid > :not(:nth-child(5)):not(:nth-child(6)){
  display: none !important;
}

/* ============================================================
   â˜… å³ãƒ–ãƒ­ãƒƒã‚¯ï¼ˆå€¤å´ï¼‰ã‚’å³å¯„ã›ã«çµ±ä¸€
   ------------------------------------------------------------
   - 2ã‚«ãƒ©ãƒ ç³»: mini-grid / status-grid / delta-grid / once-grid
   - Totals(c/w) è¡Œ: 2ã€œ4åˆ—ã‚’å³å¯„ã›
   - lastday-grid / days-grid: ã€Œãƒ©ãƒ™ãƒ«ä»¥å¤–ã€ã‚’å³å¯„ã›
   ============================================================ */
#cscs_sync_monitor_a .mini-val,
#cscs_sync_monitor_a .status-value,
#cscs_sync_monitor_a .delta-val,
#cscs_sync_monitor_a .once-val{
  text-align: right;
}

/* Totals(c/w) ã®è¡Œã¯ 4ã‚«ãƒ©ãƒ ãªã®ã§ã€å€¤å´(2ã€œ4åˆ—)ã‚’å³å¯„ã› */
#cscs_sync_monitor_a .totals-row > :nth-child(2),
#cscs_sync_monitor_a .totals-row > :nth-child(3),
#cscs_sync_monitor_a .totals-row > :nth-child(4){
  text-align: right;
}

/* lastday-grid ã¯ 3ã‚«ãƒ©ãƒ ï¼ˆlabel / SYNC / localï¼‰
   â˜… 2åˆ—ç›®ï¼ˆçœŸã‚“ä¸­=SYNCåˆ—ï¼‰ã ã‘ã‚»ãƒ³ã‚¿ãƒ¼å¯„ã›
   â˜… 3åˆ—ç›®ï¼ˆlocalåˆ—ï¼‰ã¯å³å¯„ã› */
#cscs_sync_monitor_a .lastday-grid > :nth-child(3n+2){
  text-align: center;
}
#cscs_sync_monitor_a .lastday-grid > :nth-child(3n+3){
  text-align: right;
}

/* â˜… lastday è¦‹å‡ºã—ï¼ˆtype / SYNC / localï¼‰ã®å¯„ã›æ–¹ï¼šçœŸã‚“ä¸­ã ã‘ã‚»ãƒ³ã‚¿ãƒ¼ */
#cscs_sync_monitor_a .sync-lastday-headline > :nth-child(2){
  text-align: center;
}
#cscs_sync_monitor_a .sync-lastday-headline > :nth-child(3){
  text-align: right;
}

/* days-grid ã¯ 4ã‚«ãƒ©ãƒ ï¼ˆlabel / sync / local / isTodayï¼‰ */
#cscs_sync_monitor_a .days-grid > :nth-child(4n+2),
#cscs_sync_monitor_a .days-grid > :nth-child(4n+3),
#cscs_sync_monitor_a .days-grid > :nth-child(4n+4){
  text-align: right;
}

/* â˜… lastday ã¯æŠ˜ã‚ŠãŸãŸã¿ç„¡ã—ï¼šå¸¸æ™‚è¡¨ç¤ºã®1è¡Œãƒ˜ãƒƒãƒ€ãƒ¼ */
#cscs_sync_monitor_a .sync-lastday-headline{
  display: grid;

  /* â˜… lastday-grid ã¨åˆ—å¹…ã‚’å®Œå…¨ä¸€è‡´ã•ã›ã‚‹ï¼ˆlabel=80px / SYNC / localï¼‰ */
  grid-template-columns: 80px minmax(0,1fr) minmax(0,1fr);

  column-gap: 10px;
  align-items: baseline;
  white-space: nowrap;
  overflow: hidden;
  margin-bottom: 6px;
  font-weight: 700;
  font-size: 11px;
  opacity: 0.85;
}

/* â˜… type */
#cscs_sync_monitor_a .sync-lastday-headline .sync-lastday-summary-type{
  font-weight: 700;
  opacity: 0.90;
}

/* â˜… SYNC/local ã¯ã€Œç¸®ã‚€åˆ—ã€ã«å…¥ã‚Œã€å…¥ã‚Šåˆ‡ã‚‰ãªã„æ™‚ã¯ â€¦ ã§çœç•¥ã™ã‚‹ */
#cscs_sync_monitor_a .sync-lastday-headline .sync-lastday-summary-sync{
  font-variant-numeric: tabular-nums;
  opacity: 0.88;
  font-size: 10px;
  min-width: 0;
  overflow: hidden;
  text-overflow: ellipsis;
}
#cscs_sync_monitor_a .sync-lastday-headline .sync-lastday-summary-local{
  font-variant-numeric: tabular-nums;
  opacity: 0.88;
  font-size: 10px;
  min-width: 0;
  overflow: hidden;
  text-overflow: ellipsis;
}
          `.trim();
          (document.head || document.documentElement).appendChild(st);
        }
      }catch(_){}

      const box = document.createElement("div");
      box.id = "cscs_sync_monitor_a";
      box.innerHTML = `
        <div class="sync-header">
          <span>SYNC(A): <span class="sync-qid"></span></span>
          <button type="button" class="sync-toggle-btn" data-sync-toggle="1">OPEN</button>
        </div>

        <div class="sync-grid">
          <div class="sync-card sync-span-2">
            <div class="sync-body totals-row">
              <div class="sync-totals-label">Totals(c/w)</div>

              <div id="cscs_sync_totals" class="sync-totals" data-server-c="" data-server-i="">
                <span class="sync-server-text">SYNC - / -</span>
              </div>

              <div class="sync-local">local  0 / 0</div>
              <div class="sync-queue">+Î”    0 / 0</div>
            </div>
          </div>

          <div class="sync-card">
            <div class="sync-title">â­ï¸3é€£ç¶šæ­£è§£æ•° <span class="sync-title-en">Count</span></div>
            <div class="sync-body sync-streak3">
              SYNC <span class="sync-streak3-server">0</span> å› / local <span class="sync-streak3-val">0</span> å›
            </div>
          </div>

          <div class="sync-card">
            <div class="sync-title">ğŸ’£3é€£ç¶šä¸æ­£è§£ <span class="sync-title-en">Count</span></div>
            <div class="sync-body sync-wrong-streak3">
              SYNC <span class="sync-wrong-streak3-server">0</span> å› / local <span class="sync-wrong-streak3-val">0</span> å›
            </div>
          </div>

          <div class="sync-card">
            <div class="sync-title">3é€£ç¶šæ­£è§£ é€²æ— <span class="sync-title-en">Progress</span></div>
            <div class="sync-body sync-streaklen">
              SYNC (<span class="sync-streaklen-server-progress">0</span>/3) /
              local (<span class="sync-streaklen-local-progress">0</span>/3)
            </div>
          </div>

          <div class="sync-card">
            <div class="sync-title">3é€£ç¶šä¸æ­£è§£ é€²æ— <span class="sync-title-en">Progress</span></div>
            <div class="sync-body sync-wrong-streaklen">
              SYNC (<span class="sync-wrong-streaklen-server-progress">0</span>/3) /
              local (<span class="sync-wrong-streaklen-local-progress">0</span>/3)
            </div>
          </div>

          <div class="sync-card">
            <div class="sync-title">Streak3TodayUnique</div>
            <div class="sync-body sync-streak3today">
              <div class="mini-grid">
                <div class="mini-label">unique</div>
                <div class="mini-val">sync <span class="sync-streak3today-sync">0</span> / local <span class="sync-streak3today-local">0</span></div>
              </div>
            </div>
          </div>

          <div class="sync-card">
            <div class="sync-title">Streak3WrongTodayUq</div>
            <div class="sync-body sync-streak3wrongtoday">
              <div class="mini-grid">
                <div class="mini-label">unique</div>
                <div class="mini-val">sync <span class="sync-streak3wrongtoday-sync">0</span> / local <span class="sync-streak3wrongtoday-local">0</span></div>
              </div>
            </div>
          </div>

          <div class="sync-card">
            <div class="sync-title">é€£ç¶šæ­£è§£ (Local)</div>
            <div class="sync-body">
              <div class="mini-grid">
                <div class="mini-label">streak_len</div>
                <div class="mini-val"><span class="sync-streakmax-len-local">-</span></div>

                <div class="mini-label">streak_max</div>
                <div class="mini-val"><span class="sync-streakmax-max-local">-</span></div>

                <div class="mini-label">max_day</div>
                <div class="mini-val"><span class="sync-streakmax-maxday-local">-</span></div>
              </div>
            </div>
          </div>

          <div class="sync-card">
            <div class="sync-title">é€£ç¶šä¸æ­£è§£ (Local)</div>
            <div class="sync-body">
              <div class="mini-grid">
                <div class="mini-label">streak_len</div>
                <div class="mini-val"><span class="sync-wrong-streakmax-len-local">-</span></div>

                <div class="mini-label">streak_max</div>
                <div class="mini-val"><span class="sync-wrong-streakmax-max-local">-</span></div>

                <div class="mini-label">max_day</div>
                <div class="mini-val"><span class="sync-wrong-streakmax-maxday-local">-</span></div>
              </div>
            </div>
          </div>

          <div class="sync-card sync-span-2 once-card once-card-sync">
            <div class="sync-title">
              <span class="once-title-text">OncePerDayToday / O.D.O.A Mode (SYNC)</span>
              <button type="button" class="once-fold-btn" data-once-fold="sync">â–¶show</button>
            </div>
            <div class="sync-body sync-onceperday sync">oncePerDayToday: -</div>
          </div>

          <div class="sync-card sync-span-2 once-card once-card-local">
            <div class="sync-title">
              <span class="once-title-text">OncePerDayToday / O.D.O.A Mode (local)</span>
              <button type="button" class="once-fold-btn" data-once-fold="local">â–¶show</button>
            </div>
            <div class="sync-body sync-onceperday local">oncePerDayToday: -</div>
          </div>

          <div class="sync-card sync-span-2">
            <div class="sync-lastday-headline">
              <span class="sync-lastday-summary-type">LastCorrect</span>
              <span class="sync-lastday-summary-sync">SYNC -</span>
              <span class="sync-lastday-summary-local">local -</span>
            </div>

            <div class="sync-body sync-lastday">
              <div class="lastday-grid">
                <div class="ld-label ld-row-lastseen">lastSeen</div>
                <div class="ld-row-lastseen"><span class="sync-last-seen-sync">-</span></div>
                <div class="ld-row-lastseen"><span class="sync-last-seen-local">-</span></div>

                <div class="ld-label ld-row-lastcorrect">lastCorrect</div>
                <div class="ld-row-lastcorrect"><span class="sync-last-correct-sync">-</span></div>
                <div class="ld-row-lastcorrect"><span class="sync-last-correct-local">-</span></div>

                <div class="ld-label ld-row-lastwrong">lastWrong</div>
                <div class="ld-row-lastwrong"><span class="sync-last-wrong-sync">-</span></div>
                <div class="ld-row-lastwrong"><span class="sync-last-wrong-local">-</span></div>
              </div>
            </div>
          </div>

          <div class="sync-card sync-span-2">
            <details class="sync-fold" data-fold="queue">
              <summary>Queue Î” detailï¼ˆé€ä¿¡å¾…ã¡ï¼‰</summary>
              <div class="sync-body">
                <div class="delta-grid">
                  <div class="delta-label">Totals(c/w)</div>
                  <div class="delta-val"><span class="sync-queue-cw">0 / 0</span></div>

                  <div class="delta-label">streak3Delta</div>
                  <div class="delta-val"><span class="sync-queue-s3">0</span></div>

                  <div class="delta-label">streakLenDelta</div>
                  <div class="delta-val"><span class="sync-queue-sl">ï¼ˆãªã—ï¼‰</span></div>

                  <div class="delta-label">streak3WrongDelta</div>
                  <div class="delta-val"><span class="sync-queue-s3w">0</span></div>

                  <div class="delta-label">streakWrongLenDelta</div>
                  <div class="delta-val"><span class="sync-queue-slw">ï¼ˆãªã—ï¼‰</span></div>

                  <div class="delta-label">lastSeenDayDelta</div>
                  <div class="delta-val"><span class="sync-queue-lastseen">ï¼ˆãªã—ï¼‰</span></div>

                  <div class="delta-label">lastCorrectDayDelta</div>
                  <div class="delta-val"><span class="sync-queue-lastcorrect">ï¼ˆãªã—ï¼‰</span></div>

                  <div class="delta-label">lastWrongDayDelta</div>
                  <div class="delta-val"><span class="sync-queue-lastwrong">ï¼ˆãªã—ï¼‰</span></div>
                </div>
              </div>
            </details>
          </div>

          <div class="sync-card sync-span-2">
            <div class="sync-body status-grid">
              <div class="status-label">Status</div>
              <div class="status-value">
                <span class="sync-status">pulled (-)</span>
                <button type="button" class="sync-nopull-btn" data-nopull-toggle="1">NO-PULL:OFF</button>
              </div>
            </div>
          </div>
        </div>
      `;
      const wrap = document.querySelector("div.wrap");
      if (wrap) {
        wrap.appendChild(box);
      } else {
        document.body.appendChild(box);
      }

      // === â‘£ æŠ˜ã‚ŠãŸãŸã¿çŠ¶æ…‹ã®å¾©å…ƒï¼†æ°¸ç¶šåŒ–ï¼ˆãƒ¢ãƒ‹ã‚¿å…¨ä½“ / Days / Queueï¼‰ ===
      try{
        /* â˜… OPEN/CLOSE ã¯ã€Œãƒ‘ãƒãƒ«å…¨ä½“ã€ã§ã¯ãªãã€ŒæŒ‡å®š4é …ç›®ï¼ˆsync-optionalï¼‰ã ã‘ã€ã‚’å‡ºã—å…¥ã‚Œã™ã‚‹
           - cscs-compact: ã‚ªãƒ—ã‚·ãƒ§ãƒ³é …ç›®ã‚’éš ã™ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰
           - compact è§£é™¤: ã‚ªãƒ—ã‚·ãƒ§ãƒ³é …ç›®ã‚’è¡¨ç¤ºï¼ˆï¼OPENçŠ¶æ…‹ï¼‰
           - çŠ¶æ…‹ã¯ LS_MON_OPEN ã«ä¿å­˜ã—ã€ãƒªãƒ­ãƒ¼ãƒ‰å¾Œã‚‚ç¶­æŒ */
        const monitorOpen = readLsBool(LS_MON_OPEN, false);  // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯CLOSEï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³éè¡¨ç¤ºï¼‰
        if (monitorOpen) {
          box.classList.remove("cscs-compact");
        } else {
          box.classList.add("cscs-compact");
        }

        const toggleBtn = box.querySelector('button[data-sync-toggle="1"]');
        function refreshToggleBtnLabel(){
          if (!toggleBtn) return;
          const isOpen = !box.classList.contains("cscs-compact"); // compactè§£é™¤ï¼OPEN
          toggleBtn.textContent = isOpen ? "CLOSE" : "OPEN";
        }
        refreshToggleBtnLabel();

        if (toggleBtn) {
          toggleBtn.addEventListener("click", function(){
            // â˜… ã‚¯ãƒªãƒƒã‚¯ã§ã€Œã‚ªãƒ—ã‚·ãƒ§ãƒ³é …ç›®ã€ã ã‘ã‚’ãƒˆã‚°ãƒ«ï¼ˆä»–ã®é …ç›®ã¯å¸¸æ™‚è¡¨ç¤ºï¼‰
            const nextOpen = box.classList.contains("cscs-compact"); // ä»ŠCLOSE(=compact)ãªã‚‰OPENã¸
            if (nextOpen) {
              box.classList.remove("cscs-compact");
            } else {
              box.classList.add("cscs-compact");
            }
            // â˜… æ°¸ç¶šåŒ–ï¼šOPENçŠ¶æ…‹ï¼ˆtrue/falseï¼‰ã‚’ä¿å­˜
            writeLsBool(LS_MON_OPEN, nextOpen);
            refreshToggleBtnLabel();
          });
        }

        const daysDetails       = box.querySelector('details.sync-fold[data-fold="days"]');
        const queueDetails      = box.querySelector('details.sync-fold[data-fold="queue"]');

        // ============================================================
        // â˜… OncePerDayToday / O.D.O.A Modeï¼šã‚«ãƒ¼ãƒ‰å˜ä½“ã®æŠ˜ã‚ŠãŸãŸã¿
        // ------------------------------------------------------------
        // - è¦‹å‡ºã—å³ç«¯: ã€Œâ–¶show / â–¼hideã€
        // - æŠ˜ã‚ŠãŸãŸã¿æ™‚: è¦‹å‡ºã— + 3è¡Œç›®ï¼ˆcountå¯¾è±¡ï¼‰ã®ã¿è¡¨ç¤º
        // - çŠ¶æ…‹ã¯ localStorage ã«æ°¸ç¶šåŒ–
        // ============================================================
        // ============================================================
        // â˜… OncePerDayToday / O.D.O.A Modeï¼šã‚«ãƒ¼ãƒ‰å˜ä½“ã®æŠ˜ã‚ŠãŸãŸã¿ï¼ˆSYNC / local ã‚’åˆ†é›¢ï¼‰
        // ------------------------------------------------------------
        // - data-once-fold="sync" / "local" ã‚’ãã‚Œãã‚Œåˆ¥ã‚«ãƒ¼ãƒ‰ã¨ã—ã¦æ‰±ã†
        // - çŠ¶æ…‹ã¯ localStorage ã«åˆ¥ã‚­ãƒ¼ã§æ°¸ç¶šåŒ–ã™ã‚‹
        // ============================================================
        const LS_ONCE_OPEN_SYNC  = "cscs_sync_a_onceperday_open_sync";
        const LS_ONCE_OPEN_LOCAL = "cscs_sync_a_onceperday_open_local";

        const onceCardSync   = box.querySelector(".sync-card.once-card.once-card-sync");
        const onceCardLocal  = box.querySelector(".sync-card.once-card.once-card-local");
        const onceFoldBtnSync  = box.querySelector('button[data-once-fold="sync"]');
        const onceFoldBtnLocal = box.querySelector('button[data-once-fold="local"]');

        function refreshOnceFoldBtnLabel(btn, card){
          if (!btn) return;
          const isOpen = !(card && card.classList.contains("once-collapsed"));
          btn.textContent = isOpen ? "â–¼hide" : "â–¶show";
        }

        try{
          // â˜… å‡¦ç†: SYNCã‚«ãƒ¼ãƒ‰ã®æŠ˜ã‚ŠãŸãŸã¿çŠ¶æ…‹ã‚’å¾©å…ƒã™ã‚‹
          const onceOpenSync = readLsBool(LS_ONCE_OPEN_SYNC, false); // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯æŠ˜ã‚ŠãŸãŸã¿ï¼ˆclosedï¼‰
          if (onceCardSync) {
            if (onceOpenSync) {
              onceCardSync.classList.remove("once-collapsed");
            } else {
              onceCardSync.classList.add("once-collapsed");
            }
          }
          refreshOnceFoldBtnLabel(onceFoldBtnSync, onceCardSync);

          // â˜… å‡¦ç†: localã‚«ãƒ¼ãƒ‰ã®æŠ˜ã‚ŠãŸãŸã¿çŠ¶æ…‹ã‚’å¾©å…ƒã™ã‚‹
          const onceOpenLocal = readLsBool(LS_ONCE_OPEN_LOCAL, false); // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯æŠ˜ã‚ŠãŸãŸã¿ï¼ˆclosedï¼‰
          if (onceCardLocal) {
            if (onceOpenLocal) {
              onceCardLocal.classList.remove("once-collapsed");
            } else {
              onceCardLocal.classList.add("once-collapsed");
            }
          }
          refreshOnceFoldBtnLabel(onceFoldBtnLocal, onceCardLocal);
        }catch(_){}

        if (onceFoldBtnSync) {
          onceFoldBtnSync.addEventListener("click", function(){
            try{
              if (!onceCardSync) return;
              // â˜… å‡¦ç†: SYNCã‚«ãƒ¼ãƒ‰ã‚’ãƒˆã‚°ãƒ«ã—ã€æ°¸ç¶šåŒ–ã™ã‚‹
              const nextOpen = onceCardSync.classList.contains("once-collapsed"); // ä»Šé–‰ã˜ã¦ã‚‹ãªã‚‰é–‹ã
              if (nextOpen) {
                onceCardSync.classList.remove("once-collapsed");
              } else {
                onceCardSync.classList.add("once-collapsed");
              }
              writeLsBool(LS_ONCE_OPEN_SYNC, nextOpen);
              refreshOnceFoldBtnLabel(onceFoldBtnSync, onceCardSync);
            }catch(_){}
          });
        }

        if (onceFoldBtnLocal) {
          onceFoldBtnLocal.addEventListener("click", function(){
            try{
              if (!onceCardLocal) return;
              // â˜… å‡¦ç†: localã‚«ãƒ¼ãƒ‰ã‚’ãƒˆã‚°ãƒ«ã—ã€æ°¸ç¶šåŒ–ã™ã‚‹
              const nextOpen = onceCardLocal.classList.contains("once-collapsed"); // ä»Šé–‰ã˜ã¦ã‚‹ãªã‚‰é–‹ã
              if (nextOpen) {
                onceCardLocal.classList.remove("once-collapsed");
              } else {
                onceCardLocal.classList.add("once-collapsed");
              }
              writeLsBool(LS_ONCE_OPEN_LOCAL, nextOpen);
              refreshOnceFoldBtnLabel(onceFoldBtnLocal, onceCardLocal);
            }catch(_){}
          });
        }

        /* â˜… OPEN/CLOSE ã®å¯¾è±¡ã‚«ãƒ¼ãƒ‰ï¼ˆæŒ‡å®š4é …ç›®ï¼‰ã‚’ãƒãƒ¼ã‚­ãƒ³ã‚°ã™ã‚‹
           - HTMLæ–‡å­—åˆ—ã‚’ç›´æ¥ã„ã˜ã‚‰ãšã€ç”Ÿæˆå¾ŒDOMã‹ã‚‰ã€Œdays/queueã€ã®detailsã‚’ç‰¹å®š
           - ãã‚Œãã‚Œã®è¦ª .sync-card ã« sync-optional ã‚’ä»˜ã‘ã‚‹ï¼ˆCLOSEæ™‚ã«æ¶ˆãˆã‚‹å¯¾è±¡ï¼‰ */
        function markOptional(detailsEl){
          try{
            if (!detailsEl) return;
            const card = detailsEl.closest(".sync-card");
            if (card) {
              card.classList.add("sync-optional");
            }
          }catch(_){}
        }
        markOptional(daysDetails);
        markOptional(queueDetails);

        const daysOpen        = readLsBool(LS_DAYS_OPEN, false);        // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆé–‰ã˜
        const queueOpen       = readLsBool(LS_QDEL_OPEN, false);        // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆé–‰ã˜

        if (daysDetails)        daysDetails.open        = !!daysOpen;
        if (queueDetails)       queueDetails.open       = !!queueOpen;

        if (daysDetails) {
          daysDetails.addEventListener("toggle", function(){
            writeLsBool(LS_DAYS_OPEN, !!daysDetails.open);
          });
        }
        if (queueDetails) {
          queueDetails.addEventListener("toggle", function(){
            writeLsBool(LS_QDEL_OPEN, !!queueDetails.open);
          });
        }
      }catch(_){}

      const btnOk   = document.getElementById("cscs_sync_test_ok");
      const btnNg   = document.getElementById("cscs_sync_test_ng");

      if (btnOk)   btnOk.addEventListener("click", () => window.CSCS_SYNC.recordCorrect());
      if (btnNg)   btnNg.addEventListener("click", () => window.CSCS_SYNC.recordIncorrect());

      // â˜… å‡¦ç†: ã€Œsyncã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ãªã„ï¼ˆNO-PULLï¼‰ã€ãƒ¢ãƒ¼ãƒ‰ã‚’ localStorage ã§æ°¸ç¶šåŒ–ã—ã€ãƒœã‚¿ãƒ³ã§åˆ‡æ›¿
      //   - ON: initialFetch() ã‚’å®Ÿè¡Œã—ãªã„ï¼ˆsync/state ã‚’å–ã‚Šã«è¡Œã‹ãªã„ï¼‰
      //   - OFF: é€šå¸¸é€šã‚Š initialFetch() ã§ sync/state å–å¾—ã‚’è¡Œã†
      const LS_NO_PULL = "cscs_sync_a_no_pull_mode";
      const noPullBtn = box.querySelector('button[data-nopull-toggle="1"]');

      function refreshNoPullBtnLabel(){
        if (!noPullBtn) return;
        const on = (window.__cscs_sync_no_pull === true);
        noPullBtn.textContent = on ? "NO-PULL:ON" : "NO-PULL:OFF";
      }

      try{
        // â˜… å‡¦ç†: èµ·å‹•æ™‚ã« localStorage ã‹ã‚‰çŠ¶æ…‹ã‚’å¾©å…ƒã—ã€ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ•ãƒ©ã‚°ã«åæ˜ ã™ã‚‹
        const on = readLsBool(LS_NO_PULL, false);
        window.__cscs_sync_no_pull = !!on;
        refreshNoPullBtnLabel();
      }catch(_){}

      if (noPullBtn) {
        noPullBtn.addEventListener("click", function(){
          try{
            // â˜… å‡¦ç†: ã‚¯ãƒªãƒƒã‚¯ã§ON/OFFã‚’ãƒˆã‚°ãƒ«ã—ã€localStorageã¸ä¿å­˜ã™ã‚‹
            const nextOn = !(window.__cscs_sync_no_pull === true);
            window.__cscs_sync_no_pull = nextOn;
            writeLsBool(LS_NO_PULL, nextOn);
            refreshNoPullBtnLabel();

            // â˜… å‡¦ç†: ONã¯ã€Œå–å¾—ã—ãªã„ã€ã®ã§çŠ¶æ…‹ã ã‘æ›´æ–°ã€OFFã¯å³ pull ã™ã‚‹
            if (nextOn) {
              lastSyncStatus = "nopull";
              lastSyncTime   = new Date().toLocaleTimeString();
              lastSyncError  = "";
              updateMonitor();
            } else {
              initialFetch();
            }
          }catch(_){}
        });
      }
    }catch(_){}
    initialFetch();
  });

  window.addEventListener("online", function(){
    lastSyncStatus = "idle";
    sendDelta();
  });
  window.addEventListener("offline", function(){
    lastSyncStatus = "offline";
    updateMonitor();
  });
})();
```
<<<PART_END>>>
ã€RECEIPT_INPUTï¼ˆã“ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å†…ã ã‘ã‚’çœŸã¨ã™ã‚‹ï¼‰ã€‘
EXPECTED_TOTAL: 4
RECEIVED_TOTAL: 4

CUMULATIVE_RECEIVED_PARTIDS:
- CSCSJS-01D63519-P01-of-04
- CSCSJS-01D63519-P02-of-04
- CSCSJS-01D63519-P03-of-04
- CSCSJS-01D63519-P04-of-04

EXPECTED_PARTIDS_WITH_SHA256:
- CSCSJS-01D63519-P01-of-04 | 2104e78ff64e3cad6efdbaa6816bc5886c72d5352f672d569daac3904becd4aa
- CSCSJS-01D63519-P02-of-04 | b27132e67837293d5c12f5bb365cf1c01e2b00720e92b002f20cd1aa7eae4baf
- CSCSJS-01D63519-P03-of-04 | fbf7a72ffea36e5f74dd3c3ac951b47344967ffec2ba0376c176358eacf76258
- CSCSJS-01D63519-P04-of-04 | 8cca952b47ea8c075063b42d022cfaa1ddae9c3661c166abffa8bbde3bdcaacf

ã€ChatGPTã¸ã®å¼·åˆ¶ãƒ«ãƒ¼ãƒ«ã€‘
ãƒ»å—é ˜ç¢ºèªã¯ã€ã“ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å†…ã® CUMULATIVE_RECEIVED_PARTIDS ã¨ EXPECTED_PARTIDS ã®ã¿ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã€‚
ãƒ»ä¼šè©±å±¥æ­´ã‹ã‚‰ PartID ã‚’å†åé›†ã—ãªã„ã“ã¨ï¼ˆç¦æ­¢ï¼‰ã€‚
ãƒ»å—é ˜ç¢ºèªOKå‰ã«ã€ã‚³ãƒ¼ãƒ‰å†…å®¹ã®è§£é‡ˆãƒ»è¦ç´„ãƒ»æ¨æ¸¬ãƒ»ä¿®æ­£æ¡ˆæç¤ºã‚’ã—ãªã„ã“ã¨ï¼ˆç¦æ­¢ï¼‰ã€‚

RECEIPT_REQUIRED_RESPONSE_TEMPLATE:
ACK: <PartID> <PartSHA256_8> / WAITING_NEXT

ã€EXEC_TASKï¼ˆã“ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å†…ã ã‘ã‚’çœŸã¨ã™ã‚‹ï¼šå”¯ä¸€ã®å®Ÿè¡ŒæŒ‡ç¤ºï¼‰ã€‘
Aãƒ‘ãƒ¼ãƒˆã® SYNC ãƒ‘ãƒãƒ«ã«ã€ä»¥ä¸‹ã®ã€Œåˆå›ã‚»ãƒƒãƒˆå°ç·šï¼ˆæœ€å°ä»•æ§˜ï¼‰ã€ã‚’è¿½åŠ ã—ã¦ãã ã•ã„ã€‚

ã€UIè¦ç´ ï¼ˆAãƒ‘ãƒ¼ãƒˆã®ã¿ï¼‰ã€‘
- ãƒœã‚¿ãƒ³ï¼š
  - è¡¨ç¤ºåï¼šã€Œã‚­ãƒ¼ç™ºè¡Œ / å†ç™ºè¡Œã€
- è¡¨ç¤ºæƒ…å ±ï¼š
  - userï¼šCloudflare Access ã§èªè¨¼ã•ã‚ŒãŸ email
  - key çŠ¶æ…‹ï¼šlocalStorage("cscs_sync_key") ãŒ present / missing
  - state çŠ¶æ…‹ï¼š/api/sync/state ã®çµæœï¼ˆ200 / 400 / 403ï¼‰

ã€ãƒœã‚¿ãƒ³æŠ¼ä¸‹æ™‚ã®å‡¦ç†ï¼ˆå›ºå®šãƒ»æ¨æ¸¬ç¦æ­¢ï¼‰ã€‘
1) POST /api/sync/init ã‚’å®Ÿè¡Œ
   - method: POST
   - body: { force: false }ï¼ˆå†ç™ºè¡Œæ™‚ã®ã¿ trueï¼‰
   - credentials: include

2) ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãŒ 200 ã®å ´åˆ
   - response.body.key ã‚’
     localStorage.setItem("cscs_sync_key", key) ã«ä¿å­˜ã™ã‚‹

3) ä¿å­˜ç›´å¾Œã« GET /api/sync/state ã‚’å®Ÿè¡Œ
   - headers: { "X-CSCS-Key": localStorage("cscs_sync_key") }
   - credentials: include

4) åˆ¤å®šãƒ­ã‚°ã‚’ã€Œ1è¡Œã€ã§å¿…ãšå‡ºã™ï¼ˆæ¯å›ï¼‰
   - æˆåŠŸæ¡ä»¶ï¼š
       init = 200
       state = 200
     â†’ ã€Œâœ… INIT+STATE OKã€
   - ãã‚Œä»¥å¤–ï¼š
     â†’ ã€ŒâŒ INIT+STATE FAILEDï¼ˆstatus ã‚’ä½µè¨˜ï¼‰ã€

ã€è¨­è¨ˆãƒ«ãƒ¼ãƒ«ã€‘
- ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ç¦æ­¢ï¼ˆæ¨æ¸¬ã§ key / user / status ã‚’è£œã‚ãªã„ï¼‰
- A/B å…±é€šJSã«ã¯å…¥ã‚Œãªã„ï¼ˆAãƒ‘ãƒ¼ãƒˆå°‚ç”¨å®Ÿè£…ï¼‰
- æ—¢å­˜ã® SYNC ãƒ­ã‚¸ãƒƒã‚¯ãƒ»è¨ˆæ¸¬ãƒ­ã‚¸ãƒƒã‚¯ã«ã¯ä¸€åˆ‡å½±éŸ¿ã‚’ä¸ãˆãªã„
- ç›®çš„ã¯ã€ŒAccessãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨ sync key ã®ç´ä»˜ã‘ã‚’ä¸€åº¦ã§ç¢ºå®šã•ã›ã‚‹ã€ã“ã¨ã®ã¿

ã“ã®å°ç·šã«ã‚ˆã‚Šã€
- åˆå›ã‚»ãƒƒãƒˆå®Œäº†å¾Œã¯ /api/sync/state ãŒå¸¸ã« 200
- B å´ã® POST /api/sync/merge ãŒç´ é€šã‚Š
- ä»¥å¾Œã®ãƒ‡ãƒãƒƒã‚°ã¯ â€œéµä¸ä¸€è‡´â€ ãƒã‚¤ã‚ºç„¡ã—ã§é€²ã‚ã‚‰ã‚Œã‚‹çŠ¶æ…‹ã«ãªã‚‹

ã€SCOPE_INDEXï¼ˆé€£çµå¾ŒJSã®æ¢ç´¢ç”¨ç´¢å¼•ï¼‰ã€‘
ãƒ»ã“ã®ç´¢å¼•ã¯ã€åˆ†å‰²å‰ã®å…ƒJSå…¨æ–‡ï¼ˆ= é€£çµå¾ŒJSï¼‰ã‹ã‚‰æŠ½å‡ºã—ã¦ã„ã¾ã™ã€‚
ãƒ»ã¾ãšã“ã“ã‚’è¦‹ã¦ã€Œå­˜åœ¨ã™ã‚‹/ã—ãªã„ã€ã‚’ç¢ºå®šã—ã€ä¸è¦ãªå…¨æ–‡æ¢ç´¢ã‚„è¦‹è½ã¨ã—ã‚’æ¸›ã‚‰ã—ã¦ãã ã•ã„ã€‚
ãƒ»è­˜åˆ¥å­ã ã‘ã§ãªã DOM/selector/storage key ã‚‚å«ã‚ã¦ã„ã¾ã™ã€‚

ã€SUMMARYã€‘
TOTAL_IDENTIFIERS_UNIQ: 914
TOTAL_DOM_IDS_UNIQ: 5
TOTAL_DOM_CLASSES_UNIQ: 0
TOTAL_DOM_NAMES_UNIQ: 0
TOTAL_SELECTORS_UNIQ: 63
TOTAL_LOCALSTORAGE_KEYS_UNIQ: 9
TOTAL_SESSIONSTORAGE_KEYS_UNIQ: 0

ã€IDENTIFIERS_TOP_FREQUENTï¼ˆé »å‡ºä¸Šä½ï¼‰ã€‘
- sync (277)
- div (226)
- qid (209)
- QID (201)
- SYNC (182)
- s (152)
- A (141)
- localStorage (130)
- console (130)
- state (111)
- queue (103)
- String (102)
- once (102)
- span (97)
- window (87)
- day (84)
- log (84)
- v (80)
- box (80)
- local (80)
- e (79)
- NO (74)
- oncePerDayToday (69)
- error (69)
- cscs_sync_monitor_a (67)
- querySelector (66)
- textContent (64)
- streak3Today (60)
- _ (59)
- grid (59)
- value (58)
- streak3WrongToday (55)
- FALLBACK (55)
- n (53)
- ok (51)
- object (51)
- __cscs_sync_state (50)
- raw (49)
- Object (49)
- wrong (48)
- json (46)
- font (46)
- undefined (43)
- card (43)
- unique_count (41)
- label (41)
- headers (40)
- correct (39)
- missing (39)
- val (39)
- trim (37)
- prototype (37)
- hasOwnProperty (37)
- call (37)
- server (36)
- k (35)
- key (34)
- number (33)
- lastday (33)
- X (33)
- Number (32)
- isFinite (32)
- display (32)
- delta (31)
- toDisplayText (30)
- LS (30)
- unknown (29)
- CSCS (28)
- merge (28)
- mapKey (28)
- now (27)
- r (27)
- streak3 (26)
- results (26)
- measuredResult (26)
- getItem (25)
- setItem (25)
- todayYmd (25)
- showAlert (25)
- mini (25)

ã€IDENTIFIERS_ALLï¼ˆãƒ¦ãƒ‹ãƒ¼ã‚¯è­˜åˆ¥å­ä¸€è¦§ï¼‰ã€‘
- A
- ALREADY
- ALREADY_MEASURED_TODAY
- API
- Array
- B
- BODY
- CF
- CLOSE
- CMP
- COMPLETED
- CSCS
- CSCS_ODOA_MODE
- CSCS_SYNC
- CSCS_VERIFY_MODE
- Cache
- Colo
- Count
- CustomEvent
- D
- DOM
- DOMContentLoaded
- Date
- DayDelta
- Days
- ERROR
- Error
- FAILED
- FALLBACK
- GET
- HDR
- HH
- JSON
- JST
- KV
- Key
- LS
- LS_DAYS_OPEN
- LS_MON_OPEN
- LS_NO_PULL
- LS_ONCE_OPEN_LOCAL
- LS_ONCE_OPEN_SYNC
- LS_QDEL_OPEN
- LastCorrect
- LastSeen
- LastWrong
- Local
- LocalStorage
- MERGE
- MM
- Mode
- NNN
- NO
- NOT
- NOT_MEASURED_TODAY
- NO_PULL_MODE
- NaN
- No
- Number
- O
- ODOA
- ODOA_MODE_UNKNOWN
- ODOA_OFF
- OFF
- OK
- ON
- ONCEPERDAY_STATE_UNAVAILABLE
- OPEN
- OVERWRITE
- Object
- OdoaMode
- OncePerDayToday
- POST
- PULL
- Progress
- QID
- QUEUE
- Queue
- RESET
- Ray
- Roboto
- SS
- START
- STATE
- SYNC
- SYNC_KEY_MISSING_LOCAL
- Segoe
- Status
- Streak3Today
- Streak3TodayUnique
- Streak3WrongToday
- Streak3WrongTodayUq
- String
- Today
- Token
- Totals
- UI
- User
- VERIFY
- VERIFY_MODE
- Worker
- Workers
- X
- YES
- YYYYMMDD
- Yes
- _
- __cscs_sync_last_headers
- __cscs_sync_no_pull
- __cscs_sync_state
- _a
- _build_cscs_
- _e
- _eDate
- _eOdoa
- _eOnce
- _syncKey
- a
- active
- add
- addEventListener
- addYesNo
- alert
- align
- anyDiff
- api
- appearance
- appendChild
- apple
- application
- assets
- async
- auto
- b_judge_record
- background
- baseline
- before
- bestNum
- bestType
- between
- block
- body
- boolVal
- border
- bottom
- box
- br
- btn
- btnNg
- btnOk
- button
- c
- cL
- cS
- cText
- call
- canSyncQidNumbers
- card
- center
- cf
- check
- child
- classList
- clear
- clearTimeout
- cleared
- click
- closed
- closest
- collapsed
- colo
- color
- column
- columns
- compact
- compare
- completed
- computed
- consider
- console
- contains
- content
- correct
- correctDay
- correctDelta
- correctInfo
- correctIsEmpty
- correctKeysLen
- correctRows
- correctTotal
- correct_star
- countLabel
- countType
- counted
- createElement
- cscs
- cscs_correct_streak3_log
- cscs_once_per_day_today_day
- cscs_once_per_day_today_results
- cscs_q_correct_streak3_total
- cscs_q_correct_streak_len
- cscs_q_correct_streak_max
- cscs_q_correct_streak_max_day
- cscs_q_correct_total
- cscs_q_last_correct_day
- cscs_q_last_seen_day
- cscs_q_last_wrong_day
- cscs_q_wrong_streak3_total
- cscs_q_wrong_streak_len
- cscs_q_wrong_streak_max
- cscs_q_wrong_streak_max_day
- cscs_q_wrong_total
- cscs_streak3_today_day
- cscs_streak3_today_qids
- cscs_streak3_today_unique_count
- cscs_streak3_wrong_today_day
- cscs_streak3_wrong_today_qids
- cscs_streak3_wrong_today_unique_count
- cscs_sync_a
- cscs_sync_a_days_open
- cscs_sync_a_monitor_open
- cscs_sync_a_no_pull_mode
- cscs_sync_a_onceperday_open_local
- cscs_sync_a_onceperday_open_sync
- cscs_sync_a_queue_detail_open
- cscs_sync_key
- cscs_sync_last_c
- cscs_sync_last_s3
- cscs_sync_last_w
- cscs_sync_monitor_a
- cscs_sync_test_ng
- cscs_sync_test_ok
- cscs_sync_totals
- currentLen
- currentLenWrong
- cursor
- cw
- d
- dC
- dI
- data
- dataset
- day
- dayType
- days
- daysDetails
- daysOpen
- dd
- debug
- defaultBool
- delta
- detail
- details
- detailsEl
- detectQidFromLocationA
- diff
- dispatchEvent
- display
- div
- doFetch
- document
- documentElement
- ds
- e
- eCmp
- eCorrect
- eOnceSync
- eS3t
- eS3wt
- eSync
- earned
- eee
- el
- ellipsis
- empty
- emptyLabel
- en
- enabled
- end
- endpoint
- entry
- err
- error
- ev
- exception
- failed
- fallback
- fetch
- fetchServer
- fetched
- fields
- filter
- filtered
- fixed
- flex
- fold
- font
- forEach
- from
- g
- gap
- get
- getDate
- getElementById
- getFullYear
- getItem
- getMonth
- getTodayYmdNum
- globalKeys
- gotType
- grid
- had
- hasC
- hasCorrect
- hasCorrectDelta
- hasCorrectMap
- hasDC
- hasDI
- hasDay
- hasEntry
- hasI
- hasIncorrect
- hasIncorrectDelta
- hasLastCorrect
- hasLastCorrectDay
- hasLastCorrectDayDelta
- hasLastSeen
- hasLastSeenDay
- hasLastSeenDayDelta
- hasLastWrong
- hasLastWrongDay
- hasLastWrongDayDelta
- hasObj
- hasOnce
- hasOwnProperty
- hasQdS3
- hasQdS3W
- hasQids
- hasS3
- hasS3W
- hasSL
- hasSLW
- hasState
- hasStreak3
- hasStreak3Delta
- hasStreak3Today
- hasStreak3Wrong
- hasStreak3WrongDelta
- hasStreak3WrongToday
- hasStreakLen
- hasStreakLenDelta
- hasStreakWrongLen
- hasStreakWrongLenDelta
- hasUniqueCount
- head
- header
- headers
- headline
- height
- hidden
- hide
- hideCorrect
- hideWrong
- hit
- html
- i
- iText
- id
- idle
- important
- impotant
- incorrect
- incorrectDelta
- incremented
- index
- indexOf
- initialFetch
- inline
- innerHTML
- inset
- invalid
- is
- isArray
- isFinite
- isOpen
- isToday
- isTodayOnce
- isTodayYmdString
- iso
- istoday
- items
- j
- js
- json
- justify
- k
- kC
- kCor
- kCorLast
- kCorNow
- kD
- kL
- kM
- kS
- kSeen
- kStreakLastS3
- kStreakLen
- kStreakTotal
- kW
- kWrg
- kWrgLast
- kWrgNow
- key
- keyName
- keys
- keysLen
- lEl
- lMax
- lMaxDay
- lWrongMax
- lWrongMaxDay
- label
- last
- lastCorrect
- lastCorrectDay
- lastCorrectDayDelta
- lastCorrectLocal
- lastCorrectLocalEl
- lastCorrectSync
- lastCorrectSyncEl
- lastRecordedDay
- lastRecordedDayIso
- lastSeen
- lastSeenDay
- lastSeenDayDelta
- lastSeenLocal
- lastSeenLocalEl
- lastSeenSync
- lastSeenSyncEl
- lastSyncError
- lastSyncStatus
- lastSyncTime
- lastWrong
- lastWrongDay
- lastWrongDayDelta
- lastWrongLocal
- lastWrongLocalEl
- lastWrongSync
- lastWrongSyncEl
- lastcorrect
- lastday
- lastdaySummaryLocalEl
- lastdaySummarySyncEl
- lastdaySummaryTypeEl
- lastseen
- lastwrong
- latest
- latestLocalVal
- latestSyncVal
- latestType
- lc
- lcText
- ld
- len
- length
- letter
- li
- liText
- line
- line1
- line2
- line3
- line4
- list
- ll
- llWrong
- local
- localDayNum
- localOnceDayRaw
- localProgress
- localResults
- localStorage
- localStreak
- localStreakCount
- localStreakDay
- localStreakDayRaw
- localTotals
- localWrongProgress
- localWrongStreak3Total
- localWrongStreakCount
- localWrongStreakDay
- localWrongStreakDayRaw
- localWrongStreakLen
- location
- log
- logKey
- loggedStreakMaxUiOnce
- loggedWrongStreakMaxUiOnce
- loggedWrongStreakUiOnce
- loggedWrongStreakUiPolicy
- ls
- lsWrong
- m
- map
- mapKey
- margin
- markOptional
- marker
- match
- max
- max_day
- maxday
- measured
- measuredResult
- measuredToday
- media
- merge
- mergeHeaders
- merged
- message
- method
- mh
- min
- mini
- minmax
- miss
- missing
- mm
- monitor
- monitorOpen
- mv
- n
- name
- names
- navigator
- nextOn
- nextOpen
- no
- noPullBtn
- none
- nopull
- normal
- not
- now
- nowType
- nowValue
- nowrap
- nth
- nulls
- num3
- number
- numbers
- numeric
- nums
- oa_mode
- object
- od
- odoaLabel
- odoaMode
- odoaText
- odoa_mode
- off
- offline
- ok
- okCount
- okDay
- okQids
- okResults
- on
- onLine
- once
- onceCardLocal
- onceCardSync
- onceDay
- onceDayIsTodayEl
- onceDayIso
- onceDayLocalEl
- onceDayNum
- onceDaySyncEl
- onceElLocal
- onceElSync
- onceFoldBtnLocal
- onceFoldBtnSync
- onceLabel
- onceLogPayload
- onceObj
- onceOpenLocal
- onceOpenSync
- oncePerDay
- oncePerDayToday
- onceResult
- onceperday
- online
- only
- opacity
- open
- optional
- or
- overflow
- padding
- parse
- parseInt
- parsed
- pathname
- payload
- pickLatestType
- pointer
- position
- prefixes
- prepare
- progress
- prototype
- pull
- pulled
- q
- qEl
- qdCor
- qdCorEl
- qdCwEl
- qdEl
- qdS3
- qdS3El
- qdS3W
- qdS3wEl
- qdSL
- qdSLW
- qdSLel
- qdSLwEl
- qdSeen
- qdSeenEl
- qdWrg
- qdWrgEl
- qid
- qidHasEntry
- qidValue
- qids
- qidsIsArray
- qidsLen
- querySelector
- querySelectorAll
- queue
- queueDetails
- queueOpen
- queued
- r
- radius
- raw
- rawCor
- rawDay
- rawLocalCnt
- rawLocalWrongCnt
- rawRes
- rawSeen
- rawWrg
- ray
- rc
- read
- readDatasetNonNegIntOrNull
- readHeaderAny
- readHeaderStrict
- readLocalLastCorrectDayForQid
- readLocalLastSeenDayForQid
- readLocalLastWrongDayForQid
- readLocalStreak3ForQid
- readLocalStreakLenForQid
- readLocalStreakMaxDayForQid
- readLocalStreakMaxForQid
- readLocalTotalsForQid
- readLocalWrongStreak3ForQid
- readLocalWrongStreakLenForQid
- readLocalWrongStreakMaxDayForQid
- readLocalWrongStreakMaxForQid
- readLsBool
- readLsNonNegIntOrNull
- readMapNumberStrict
- readStateMapNumberStrict
- reasonLabel
- recordCorrect
- recordIncorrect
- recordStreak3
- recordStreakLen
- recordWrongStreak3
- recordWrongStreakLen
- refreshNoPullBtnLabel
- refreshOnceFoldBtnLabel
- refreshToggleBtnLabel
- remove
- removeItem
- removedKeys
- removedLocalKeys
- rendered
- repeat
- replace
- res
- reset
- resetAllQidSyncAndLocal
- resetOncePerDayTodayAll
- resetStar
- resetStarForThisQid
- resetStreak3TodayAll
- resetSyncForThisQid
- reset_all_qid
- reset_once_per_day_today
- reset_qid
- reset_streak3_qid
- reset_streak3_today
- response
- results
- resultsKeys
- resultsType
- rgba
- ri
- right
- row
- rs3
- rs3w
- rsl
- rslw
- s
- s3
- s3El
- s3sEl
- s3tDayEl
- s3tDayIsTodayEl
- s3tDayLocalEl
- s3tDaySyncEl
- s3tLocalEl
- s3tSyncEl
- s3w
- s3wEl
- s3wsEl
- s3wtDayEl
- s3wtDayIsTodayEl
- s3wtDayLocalEl
- s3wtDaySyncEl
- s3wtLocalEl
- s3wtSyncEl
- sLen
- same
- sans
- sc
- scheduleSend
- seen
- seenDay
- select
- selected
- sendDelta
- sendTimer
- sending
- serif
- server
- serverC
- serverI
- serverProgress
- serverS3
- serverSL
- serverTextEl
- serverWrongProgress
- serverWrongStreak3Total
- serverWrongStreakLen
- set
- setItem
- setServerTotalsForQid
- setTimeout
- sh
- shadow
- show
- showAlert
- si
- size
- skipped
- sl
- slEl
- slWrong
- slice
- slides
- sllProgEl
- sllwProgEl
- slsEl
- slsProgEl
- slw
- slwEl
- slwsEl
- slwsProgEl
- snapshot
- solid
- space
- spacing
- span
- src
- ss
- ssWrong
- st
- stEl
- stars
- state
- stateForLast
- stateForOnceDay
- stateHeaders
- status
- statusText
- streak
- streak3
- streak3Correct
- streak3Delta
- streak3Today
- streak3TodayCountForUi
- streak3TodayDayForUi
- streak3TodayDelta
- streak3Wrong
- streak3WrongDelta
- streak3WrongToday
- streak3WrongTodayCountForUi
- streak3WrongTodayDayForUi
- streak3WrongTodayDelta
- streak3today
- streak3wrongtoday
- streakLen
- streakLenCorrect
- streakLenDelta
- streakLenWrong
- streakMax
- streakMaxDay
- streakMaxDayEl
- streakMaxLenEl
- streakMaxValEl
- streakWrongLen
- streakWrongLenDelta
- streak_len
- streak_max
- streaklen
- streakmax
- string
- stringify
- style
- summary
- sv
- sync
- syncOnceDayRaw
- synced
- system
- tabular
- template
- test
- text
- textContent
- time
- title
- to
- toDisplayText
- toLocaleTimeString
- today
- todayYmd
- toggle
- toggleBtn
- top
- totals
- totalsEl
- transform
- translateY
- transparent
- trim
- ts
- type
- ui
- undefined
- unique
- unique_count
- unknown
- update
- updateMonitor
- updated
- updatedAt
- user
- v
- v2
- v3
- vCor
- vSeen
- vWrg
- val
- value
- valueType
- variant
- verifyModeOn
- w
- wL
- wS
- warn
- webkit
- weight
- white
- width
- window
- word
- wrap
- writeLsBool
- wrong
- wrongDay
- wrongRows
- wrongStreakLen
- wrongStreakMax
- wrongStreakMaxDay
- wrongStreakMaxDayEl
- wrongStreakMaxLenEl
- wrongStreakMaxValEl
- wrongTotal
- ymdNum
- ymdNumToIso
- ymdStr
- ymdStrToIso
- ymdToNum8
- yy
- z

ã€DOM_IDSï¼ˆgetElementById ã®æ–‡å­—åˆ—ï¼‰ã€‘
- cscs-sync-a-monitor-style
- cscs_sync_monitor_a
- cscs_sync_test_ng
- cscs_sync_test_ok
- cscs_sync_totals

ã€DOM_CLASSESï¼ˆgetElementsByClassName ã®æ–‡å­—åˆ—ï¼‰ã€‘

ã€DOM_NAMESï¼ˆgetElementsByName ã®æ–‡å­—åˆ—ï¼‰ã€‘

ã€SELECTORSï¼ˆquerySelector/querySelectorAll ã®æ–‡å­—åˆ—ï¼‰ã€‘
- .correct_star
- .lastday-grid .ld-row-lastcorrect
- .lastday-grid .ld-row-lastwrong
- .sync-card.once-card.once-card-local
- .sync-card.once-card.once-card-sync
- .sync-last-correct-local
- .sync-last-correct-sync
- .sync-last-seen-local
- .sync-last-seen-sync
- .sync-last-wrong-local
- .sync-last-wrong-sync
- .sync-lastday-summary-local
- .sync-lastday-summary-sync
- .sync-lastday-summary-type
- .sync-local
- .sync-onceperday-day-istoday
- .sync-onceperday-day-local
- .sync-onceperday-day-sync
- .sync-onceperday.local
- .sync-onceperday.sync
- .sync-qid
- .sync-queue
- .sync-queue-cw
- .sync-queue-lastcorrect
- .sync-queue-lastseen
- .sync-queue-lastwrong
- .sync-queue-s3
- .sync-queue-s3w
- .sync-queue-sl
- .sync-queue-slw
- .sync-server-text
- .sync-status
- .sync-streak3-server
- .sync-streak3-val
- .sync-streak3today-day
- .sync-streak3today-day-istoday
- .sync-streak3today-day-local
- .sync-streak3today-day-sync
- .sync-streak3today-local
- .sync-streak3today-sync
- .sync-streak3wrongtoday-day
- .sync-streak3wrongtoday-day-istoday
- .sync-streak3wrongtoday-day-local
- .sync-streak3wrongtoday-day-sync
- .sync-streak3wrongtoday-local
- .sync-streak3wrongtoday-sync
- .sync-streaklen-local-progress
- .sync-streaklen-server
- .sync-streaklen-server-progress
- .sync-streaklen-val
- .sync-streakmax-len-local
- .sync-streakmax-max-local
- .sync-streakmax-maxday-local
- .sync-wrong-streak3-server
- .sync-wrong-streak3-val
- .sync-wrong-streaklen-local-progress
- .sync-wrong-streaklen-server
- .sync-wrong-streaklen-server-progress
- .sync-wrong-streaklen-val
- .sync-wrong-streakmax-len-local
- .sync-wrong-streakmax-max-local
- .sync-wrong-streakmax-maxday-local
- div.wrap

ã€LOCALSTORAGE_KEYSã€‘
- cscs_once_per_day_today_day
- cscs_once_per_day_today_results
- cscs_streak3_today_day
- cscs_streak3_today_qids
- cscs_streak3_today_unique_count
- cscs_streak3_wrong_today_day
- cscs_streak3_wrong_today_qids
- cscs_streak3_wrong_today_unique_count
- cscs_sync_key

ã€SESSIONSTORAGE_KEYSã€‘

ã€å‡ºåŠ›ä»•æ§˜ï¼ˆãƒ‘ãƒƒãƒè¦ç´„ï¼šå³å®ˆï¼‰ã€‘
- å‚ç…§å…ƒã®ã‚³ãƒ¼ãƒ‰ã‹ã‚‰ã€Œç¢ºå®Ÿã«æ¤œç´¢ã§ãã‚‹ã€å½¢ã§æç¤ºã™ã‚‹ã“ã¨ï¼ˆæ¤œç´¢ã—ã‚„ã™ã„é€£ç¶šè¡Œã‚’å«ã‚ã‚‹ï¼‰
- å¿…ãšå‚ç…§å…ƒã¨ã€ŒåŒã˜ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆã€ã§æç¤ºã™ã‚‹ã“ã¨
- ã€Œç½®æ›å‰ï¼ç½®æ›å¾Œã€ã‚’æ˜ç¢ºã«åˆ†ã‘ã‚‹ã“ã¨ï¼ˆãã‚Œãã‚Œåˆ¥ã®ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ï¼‰
- ã€Œ...ã€ã€Œï¼ˆä¸­ç•¥ï¼‰ã€ã€Œçœç•¥ã€ãªã©ã®çœç•¥è¡¨ç¾ã¯ç¦æ­¢ï¼ˆç½®æ›å¯¾è±¡è¡Œã¯çœç•¥ãªã—ï¼‰
- å‡ºåŠ›ã¯ã€Œãƒ•ãƒ«ã€ã§ã¯ãªãã€Œç½®æ›éƒ¨åˆ†ã®ã¿ã€
- ç½®æ›å‰ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯å†…ã«ã€Œå‚ç…§å…ƒæœ¬æ–‡ã«ç„¡ã„ã‚³ãƒ¡ãƒ³ãƒˆã€ã‚’è¿½åŠ ã—ãªã„ã“ã¨
- ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ã®è¨­å®šãƒ»ä¿é™ºãƒ»è‡ªå‹•äº’æ›ã‚³ãƒ¼ãƒ‰ã®è¿½åŠ ã¯åŸºæœ¬çš„ã«ç¦æ­¢ï¼ˆå¿…è¦ãªã‚‰ç†ç”±ã¨å½±éŸ¿ã‚’æ˜ç¤ºã—ã¦åœæ­¢ã—ç¢ºèªã‚’å–ã‚‹ï¼‰
- è¿½åŠ ã—ãŸå‡¦ç†ã«ã¯ã€å‡¦ç†ã”ã¨ã«ã€ä½•ã‚’ã—ã¦ã„ã‚‹ã‹ã€ã®è£œè¶³ã‚³ãƒ¡ãƒ³ãƒˆã‚’ç½®æ›å¾Œå´ã«å…¥ã‚Œã‚‹ã“ã¨

ã€ChatGPT å®Ÿè¡Œãƒ«ãƒ¼ãƒ«ï¼ˆå¼·åˆ¶ï¼‰ã€‘
ãƒ»RECEIPT_CHECK: OK ã®å ´åˆã€å®Ÿè¡Œå¯¾è±¡ã¯ä¸Šè¨˜ EXEC_TASK ã®ã¿ã€‚åˆ¥ã®å•é¡Œåˆ†æã‚„ä¸€èˆ¬è«–ã¯ç¦æ­¢ã€‚
ãƒ»SCOPE_CHECK ã¯åŸå‰‡ã¨ã—ã¦ OK / WARN ã®2æ®µéšã®ã¿ï¼ˆFAIL ã‚’è¿”ã—ã¦åœæ­¢ã™ã‚‹ã“ã¨ã¯ç¦æ­¢ï¼‰ã€‚
ãƒ»è­˜åˆ¥å­/DOM/é–¢æ•°ãŒã€SCOPE_INDEX ã«è¦‹å½“ãŸã‚‰ãªã„ã€å ´åˆã§ã‚‚ã€ãŸã ã¡ã«åœæ­¢ã—ãªã„ã€‚ã¾ãšæ¬¡ã‚’å¿…ãšå®Ÿæ–½ã™ã‚‹ï¼š
  1) SCOPE_INDEX ã®ç¢ºèªï¼ˆã‚¹ãƒšãƒ«é•ã„/å¤§æ–‡å­—å°æ–‡å­—/ç•¥ç§°ã‚’å«ã‚å†ç¢ºèªï¼‰
  2) å—é ˜ã—ãŸå„ãƒ‘ãƒ¼ãƒˆæœ¬æ–‡ã®ç¯„å›²ã§å…¨æ–‡æ¤œç´¢ï¼ˆPartã”ã¨ã® PART_SCOPE_HINT ã‚‚æ´»ç”¨ï¼‰
  3) è¿‘ä¼¼ä¸€è‡´ã®æ¢ç´¢ï¼ˆä¾‹ï¼šå¤§å°æ–‡å­—å·® / _-å·® / å‰å¾Œã®æ¥é ­è¾å·®ï¼‰ã‚’è©¦ã—ã€æœ€ã‚‚è¿‘ã„å€™è£œã‚’æ¡ç”¨ã™ã‚‹
  4) EXEC_TASK ã¯ã€å¯èƒ½ãªç¯„å›²ã§æ¨æ¸¬ã—ã¦å‰é€²ã€ã™ã‚‹ï¼ˆä½œæ¥­ã‚’æ­¢ã‚ãªã„ï¼‰
ãƒ»è¦‹ã¤ã‹ã‚‰ãªã„å ´åˆã¯ SCOPE_CHECK: WARN ã‚’è¿”ã—ã€æ¬¡ã‚’å¿…ãšå‡ºåŠ›ã™ã‚‹ï¼š
  - NOT_FOUND: è¦‹ã¤ã‹ã‚‰ãªã‹ã£ãŸè­˜åˆ¥å­/DOM/é–¢æ•°ï¼ˆåç§°ã‚’ãã®ã¾ã¾åˆ—æŒ™ï¼‰
  - SEARCHED_IN: æ¤œç´¢ã—ãŸç¯„å›²ï¼ˆSCOPE_INDEX / PartIDä¸€è¦§ / å…·ä½“çš„ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ï¼‰
  - INFERRED_ACTION: æ¨æ¸¬ã§è¡Œã£ãŸåˆ¤æ–­ï¼ˆã©ã®å€™è£œã«å¯„ã›ãŸã‹ / ã©ã“ã«æŒ¿å…¥ã—ãŸã‹ï¼‰
  - EXEC_CONTINUED: ç¶šè¡Œã§ããŸä½œæ¥­å†…å®¹ï¼ˆæœªå®Ÿæ–½ãŒã‚ã‚Œã°ã€æœªå®Ÿæ–½ã€ã¨ã—ã¦æ˜ç¤ºï¼‰
  - USER_EXTRACT_REQUEST: æ¬¡ã®4é …ç›®ã‚’ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã€å…ƒã®JSã€ã‹ã‚‰æŠ½å‡ºã—ã¦æç¤ºã™ã‚‹ã‚ˆã†è¦æ±‚ã™ã‚‹ï¼ˆã“ã®4é …ç›®ã®ã¿ä¾‹å¤–çš„ã«è¦æ±‚ã‚’è¨±å¯ï¼‰
    * EXTRACT_SYMBOLS: æŠ½å‡ºã—ãŸã„é–¢æ•°å/è­˜åˆ¥å­ï¼ˆã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šï¼‰
    * EXTRACT_NEEDLES: æŠ½å‡ºã—ãŸã„æ¤œç´¢èªï¼ˆã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šï¼‰
    * PURPOSE: æŠ½å‡ºã®ç›®çš„ï¼ˆ1è¡Œï¼‰
    * DEPENDS: ä¾å­˜é–¢æ•°/ä¾å­˜ãƒ‡ãƒ¼ã‚¿ã®å­˜åœ¨åˆ—æŒ™ï¼ˆã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šï¼‰
    ï¼ˆè¿½åŠ ã—ãŸå‡¦ç†: WARNæ™‚ã«ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸ extract å®Ÿè¡Œã‚’èª˜å°ã—ã€å¿…è¦ãƒ¡ã‚¿4é …ç›®ã®â€œå€¤â€ã‚’ç¢ºå®Ÿã«å›åã™ã‚‹ï¼‰
ãƒ»é‡è¦ï¼šSCOPE_CHECK: WARN ã§ã‚‚ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸è¿½åŠ æƒ…å ±ã‚’è¦æ±‚ã™ã‚‹è¡Œç‚ºã€ã¯ç¦æ­¢ã€‚
  ï¼ˆè¿½åŠ ã—ãŸå‡¦ç†: ãŸã ã— EXTRACT_SYMBOLS / EXTRACT_NEEDLES / PURPOSE / DEPENDS ã®4é …ç›®ã®æç¤ºè¦æ±‚ã ã‘ã¯ä¾‹å¤–ã¨ã—ã¦è¨±å¯ã™ã‚‹ï¼‰
ãƒ»é‡è¦ï¼šSCOPE_CHECK: WARN ã®å ´åˆã§ã‚‚ã€æœ€çµ‚ã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆã¯å¿…ãšæç¤ºã™ã‚‹ï¼ˆåœæ­¢ã—ãªã„ï¼‰ã€‚

ã€åˆ†å‰²ã‚³ãƒ¼ãƒ‰(4)ã®çµ‚äº†ã€‘â†’ ã“ã‚Œã§æœ€å¾Œã§ã™ï¼ˆå…¨4åˆ†å‰²ï¼‰

ã€åˆ†å‰²çµ‚äº†å®£è¨€ã€‘
ã“ã‚Œã§åˆ†å‰²ã‚³ãƒ¼ãƒ‰ã¯æœ€å¾Œã§ã™ã€‚ç›´å¾Œã® RECEIPT_INPUTï¼ˆã“ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å†…ï¼‰ã‚’ç”¨ã„ã¦å—é ˜ç¢ºèªã‚’å®Ÿæ–½ã—ã¦ãã ã•ã„ã€‚

ã€ChatGPTã¸ã®æœ€çµ‚æ‰‹é †ï¼ˆå¼·åˆ¶ï¼‰ã€‘
1) ã“ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å†…ã® CUMULATIVE_RECEIVED_PARTIDS ã‚’å—é ˜ä¸€è¦§ã¨ã—ã¦æ¡ç”¨ã™ã‚‹ï¼ˆä¼šè©±å±¥æ­´å‚ç…§ã¯ç¦æ­¢ï¼‰ã€‚
2) ã“ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å†…ã® EXPECTED_PARTIDS ã¨ç…§åˆã—ã€æ¬ è½/é‡è¤‡/ä¸ä¸€è‡´ã‚’åˆ¤å®šã™ã‚‹ã€‚
3) åˆ¤å®šçµæœã‚’ä»¥ä¸‹ã®å½¢å¼ã§å¿…ãšè¿”ã™ï¼š
   RECEIPT_CHECK: OK ã‚‚ã—ãã¯ NG
   RECEIPT_MISSING: ï¼ˆä¸è¶³ãŒã‚ã‚Œã°åˆ—æŒ™ã€ãªã‘ã‚Œã° EMPTYï¼‰
   RECEIPT_DUPLICATE: ï¼ˆé‡è¤‡ãŒã‚ã‚Œã°åˆ—æŒ™ã€ãªã‘ã‚Œã° EMPTYï¼‰
   RECEIPT_MISMATCH: ï¼ˆä¸ä¸€è‡´ãŒã‚ã‚Œã°åˆ—æŒ™ã€ãªã‘ã‚Œã° EMPTYï¼‰

4) é‡è¦ï¼šRECEIPT_CHECK: OK ã®å ´åˆã€åŒã˜è¿”ç­”ã®ä¸­ã§å¿…ãšç¶šã‘ã¦æ¬¡ã‚‚å‡ºåŠ›ã—ã€ç›´ã¡ã«å®Ÿè¡Œã™ã‚‹ï¼š
   JOIN_READY: YES
   JOIN_ACTION: P01â†’P02â†’...â†’Pn ã®é †ã«å…¨ãƒ‘ãƒ¼ãƒˆã‚’é€£çµã—ã¦å®Œå…¨ãªJSã‚’æ§‹ç¯‰ã™ã‚‹
   EXEC_START: ã“ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å†…ã® EXEC_TASKï¼ˆå”¯ä¸€ã®å®Ÿè¡ŒæŒ‡ç¤ºï¼‰ã‚’å®Œå…¨ãªJSã«å¯¾ã—ã¦å®Ÿè¡Œã—ã€çµæœã‚’æç¤ºã™ã‚‹

5) é‡è¦ï¼šRECEIPT_CHECK: NG ã®å ´åˆã€åŒã˜è¿”ç­”ã®ä¸­ã§å¿…ãšç¶šã‘ã¦æ¬¡ã‚‚å‡ºåŠ›ã—ã¦çµ‚äº†ã™ã‚‹ï¼š
   JOIN_READY: NO
   RESEND_REQUEST: ä¸è¶³/é‡è¤‡/ä¸ä¸€è‡´ã® PartID ã‚’ãã®ã¾ã¾åˆ—æŒ™ã—ã¦å†é€è¦æ±‚ã™ã‚‹
   EXEC_START: BLOCKED

ã€ç¦æ­¢äº‹é …ï¼ˆå†æ²ï¼‰ã€‘
ãƒ»å—é ˜ç¢ºèªOKå‰ã«ã€ã‚³ãƒ¼ãƒ‰ã®è¦ç´„/æ¨æ¸¬/ä¿®æ­£ææ¡ˆ/ä½œæ¥­é–‹å§‹ã‚’ã—ãªã„ã€‚
ãƒ»RECEIPT_CHECK: OK ã®å ´åˆã§ã‚‚ã€ä¸Šè¨˜ã® JOIN_READY/JOIN_ACTION/EXEC_START ã‚’åŒã˜è¿”ç­”ã§å‡ºã™å‰ã«æ­¢ã¾ã‚‰ãªã„ã€‚
ãƒ»å®Ÿè¡Œæ ¹æ‹ ã¯æœ€çµ‚ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å†… EXEC_TASK ã®ã¿ã€‚PART_01ã®æ–‡ã‚’ç†ç”±ã«åˆ¥ä½œæ¥­ã‚’é–‹å§‹ã—ãªã„ã€‚

