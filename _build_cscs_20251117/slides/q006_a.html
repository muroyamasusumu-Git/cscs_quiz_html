<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover, maximum-scale=1">
  <meta charset="utf-8">
  <style>
html, body {
  margin: 0;
  padding: 0;
  background: #111;
  color: #fff;
  width: 100%;
  height: 100%;
}

.wrap {
  margin: 40px auto;
  font-family: -apple-system, BlinkMacSystemFont,
               "Hiragino Kaku Gothic ProN", "Yu Gothic", "Meiryo", sans-serif;
  line-height: 1.5;
  font-size: 32px;
}


.top-title  { opacity:.95; color:#fff; }
.top-date   { color:#a8b0b8; opacity:.95; }
.top-number { color:#c9c9c9; }
.top-level  { color:#a8a8a8; }
.crumb-field{font-size:26px;font-weight:400}
.crumb-sep{opacity:.6}
.crumb-theme{font-size:22px;opacity:.85}

/* ãƒ˜ãƒƒãƒ€ãƒ¼éƒ¨ï¼ˆå·¦å³ãƒ–ãƒ­ãƒƒã‚¯ï¼‹å³ç«¯æ—¥ä»˜ï¼‰ */
.topmeta {
  display: flex;
  justify-content: space-between;  /* å·¦å³ã‚’åˆ†ã‘ã‚‹ */
  align-items: center;
  gap: 16px;
  font-size: 24px;
  font-weight: 500;
  color: rgba(255, 255, 255, 0.7);
  opacity: 0.85;
  margin-bottom: 6px;
  flex-wrap: wrap;
}

/* å·¦ãƒ–ãƒ­ãƒƒã‚¯ï¼ˆã‚¿ã‚¤ãƒˆãƒ«ï¼ç•ªå·ï¼ãƒ¬ãƒ™ãƒ«ï¼‰ */
.topmeta-left {
  display: flex;
  flex-wrap: wrap;
  gap: 14px;
  align-items: center;
}

/* å³ãƒ–ãƒ­ãƒƒã‚¯ï¼ˆæ—¥ä»˜ã ã‘å³ç«¯ã«å¯„ã›ã‚‹ï¼‰ */
.topmeta-right {
  margin-left: auto;
  text-align: right;
  white-space: nowrap;
}

.qno {
  font-size: 20px;
  opacity: .9;
  margin: 6px 0 2px;
}

/* å•é¡Œæ–‡ */
h1 {
  font-size: 44px;
  margin: 10px 0 10px;
  color: #66d9ff;     /* æ˜ã‚‹ã„æ°´è‰² */
  line-height: 1.10;  /* ã‚¿ã‚¤ãƒˆã« */
  overflow-wrap: anywhere;
  word-break: break-word;
}

/* é¸æŠè‚¢ */
.opts {
  padding-left: 1.1em;
  margin-left: 15px;
  margin-top: 0;
}

ol.opts {
    margin-bottom: 20px;
}

.opts li {
  margin-top: 2px;
  margin-bottom: 2px;
}

/* åŒºåˆ‡ã‚Šç·š */
.hr {
  height: 1px;
  background: #444;
  margin: 0 0 8px;
}

/* æ­£è§£ */
.answer { margin-top: 12px; font-weight: 600; }
.answer { word-break: break-word; }
.answer {
  font-size: 40px;
  margin-top: 0;
  margin-left: 0;
  color: #fff34d;  /* æ˜ã‚‹ã„é»„è‰² */
}

/* Bãƒ‘ãƒ¼ãƒˆã®ã€Œæ­£è§£: Aã€€æœ¬ã€€æ–‡ã€ã®â€œæœ¬æ–‡â€ã ã‘å°‘ã—å°ã•ã */
.answer .opt-small {
  font-size: 0.85em;   /* â† ã»ã‚“ã®å°‘ã—å°ã•ãï¼ˆ0.85ã€œ0.95ã§èª¿æ•´ï¼‰ */
  line-height: 1.25;  /* ä»»æ„ï¼šè¡Œé–“ã‚’å°‘ã—è©°ã‚ã‚‹ */
  opacity: 0.95;      /* ä»»æ„ï¼šã‚ãšã‹ã«è½ã¨ã—ã¦ä¸»å½¹ã®Aã‚’å¼·èª¿ */
  margin-left: 10px;
}

/* è§£èª¬ */
.explain {
  font-size: 16px;
  margin-top: 4px;
  margin-left: 0;
  opacity: .92;
  white-space: pre-wrap;
}

/* ãƒ’ãƒ³ãƒˆï¼ˆBæœªè¡¨ç¤ºæ®µéšï¼‰ */
.hint {
  font-size: 22px;
  opacity: .6;
  margin-top: 0;
  margin-left: 0;
}
  
/* é¸æŠè‚¢ãƒªãƒ³ã‚¯ï¼šæœ¬æ–‡è‰²ã‚’ç¶™æ‰¿ã€‚iOSã®å¼·åˆ¶è‰²ãƒ»visitedã‚‚æŠ‘æ­¢ */
.opt-link,
.opt-link:link,
.opt-link:visited,
.opt-link:active {
  color: inherit !important;
  -webkit-text-fill-color: currentColor !important;
  text-decoration: none;
}
.opt-link:hover, .opt-link:focus { text-decoration: underline; }


/* å·¦ä¸‹ [TOPã¸æˆ»ã‚‹] ãƒœã‚¿ãƒ³ */
.back-to-top {
  position: fixed;
  left: 16px;
  bottom: 16px;
  padding: 6px 10px;
  background: rgba(255,255,255,0.08);
  color: #66d9ff;
  font-size: 16px;
  border-radius: 6px;
  text-decoration: none;
  z-index: 10050; /* ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤(9999)ã‚„ä»–è¦ç´ ã‚ˆã‚Šå‰é¢ã«ã—ã¦ã‚¯ãƒªãƒƒã‚¯å¯èƒ½ã« */
  transition: background 0.2s, opacity 0.2s;
}
.back-to-top:hover {
  background: rgba(255,255,255,0.15);
  opacity: 1.0;
}


/* é¸æŠè‚¢ãƒªãƒ³ã‚¯ã®è‰²ã‚’å¸¸ã«æœ¬æ–‡è‰²ã«ï¼ˆiOSã®visited/activeã®é’/ç´«ã‚‚æ½°ã™ï¼‰ */
ol.opts a.opt-link,
ol.opts a.opt-link:link,
ol.opts a.opt-link:visited,
ol.opts a.opt-link:active,
ol.opts a.opt-link:hover,
ol.opts a.opt-link:focus {
  color: inherit !important;
  -webkit-text-fill-color: currentColor !important; /* iOS Safari */
  text-decoration: none;
}
ol.opts a.opt-link:hover,
ol.opts a.opt-link:focus { text-decoration: underline; }

/* iOSã®ã‚¿ãƒƒãƒ—æ™‚ãƒã‚¤ãƒ©ã‚¤ãƒˆã‚’æ§ãˆã‚ã« */
a { -webkit-tap-highlight-color: rgba(255,255,255,0.12); }

</style>

      <script>
      (function(){
        if (window.__cscsAListenerInstalled2) return;
        window.__cscsAListenerInstalled2 = true;

        // qid = YYYYMMDD-NNNï¼ˆAãƒšãƒ¼ã‚¸é™å®šï¼‰
        const mDay  = location.pathname.match(/_build_cscs_(\d{8})/);
        const mStem = location.pathname.match(/(?:^|\/)(q\d{3})_a(?:\.html)?(?:\/)?$/i);
        if (!mDay || !mStem) return;
        const day  = mDay[1];
        const num3 = mStem[1].slice(1);
        const qid  = ${day}-${num3};

        // ãƒ‡ãƒãƒƒã‚°ãƒ‘ãƒãƒ«ã¯éè¡¨ç¤ºï¼ˆã‚³ãƒ³ã‚½ãƒ¼ãƒ«å‡ºåŠ›ã®ã¿ï¼‰
        function dlog(...args){
          try{
            console.log('[A:nav-guard]', ...args);
          }catch(_){}
        }

        // ä¿å­˜çŠ¶æ…‹
        const SAVE = { tried:false, ok:false, lastHref:null, lastChoice:null };

        function makeToken(){
          try{
            const a = new Uint32Array(2);
            crypto.getRandomValues(a);
            return ${qid}:${a[0].toString(36)}${a[1].toString(36)};
          }catch(_){
            return ${qid}:${Date.now()}:${Math.random().toString(36).slice(2)};
          }
        }

        function pickChoice(a){
          try{
            const raw = a.getAttribute('href') || '';
            let c = '';
            try{
              const url = new URL(raw, location.href);
              c = (url.searchParams.get('choice') || '').trim().toUpperCase();
              if (/^[A-E]$/.test(c)) return c;
            }catch(_){}
            const t = (a.textContent || '').trim();
            const head = t.charAt(0).toUpperCase();
            if (/^[A-E]$/.test(head)) return head;
            const li = a.closest && a.closest('li');
            const dataC = li && (li.getAttribute('data-choice') || '').toUpperCase();
            if (/^[A-E]$/.test(dataC)) return dataC;
            return '';
          }catch(_){ return ''; }
        }

        // ã‚¿ãƒ¼ã‚²ãƒƒãƒˆåˆ¤å®šï¼ˆqNNN_b[.html]ï¼‰
        function isTargetAnchor(el){
          if (!el || !el.getAttribute) return false;
          const raw = el.getAttribute('href') || '';
          try{
            const u = new URL(raw, location.href);
            return /(?:^|\/)q\d{3}_b(?:\.html)?(?:\/)?$/i.test(u.pathname);
          }catch(_){
            return /(?:^|\/)?q\d{3}_b(?:\.html)?(?:\/)?$/i.test(raw);
          }
        }

        // localStorage è‡ªå·±è¨ºæ–­
        function storageSelfTest(){
          try{
            const k = '__cscs_selftest__';
            const v = String(Math.random());
            localStorage.setItem(k, v);
            const r = localStorage.getItem(k);
            localStorage.removeItem(k);
            return r === v;
          }catch(err){
            dlog('selftest NG:', String(err));
            return false;
          }
        }

        // ä¿å­˜ï¼ˆround-trip æ¤œè¨¼ã¤ãã€è»½ã„ãƒªãƒˆãƒ©ã‚¤ï¼‰
        async function saveTokenFor(a){
          if (SAVE.ok) return true;
          SAVE.tried = true;

          const choice = pickChoice(a);
          const token  = makeToken();
          const Kt = cscs_from_a_token:${qid};
          const Kc = cscs_from_a:${qid};

          const selfOK = storageSelfTest();
          if (!selfOK){
            dlog('localStorage not writable (selftest NG)');
          }

          try{
            let ok = false, rt = null;
            for (let i=0;i<3;i++){
              localStorage.setItem(Kt, token);
              if (choice) localStorage.setItem(Kc, choice);
              rt = localStorage.getItem(Kt);
              if (rt === token) { ok = true; break; }
              await Promise.resolve(); // microtask ç›¸å½“
            }

            try{
              sessionStorage.setItem('cscs_last_token_qid', qid);
              sessionStorage.setItem('cscs_last_token_value', token);
              if (choice) sessionStorage.setItem('cscs_last_choice', choice);
            }catch(_){}

            SAVE.ok = !!ok;
            SAVE.lastHref = a.getAttribute('href') || '';
            SAVE.lastChoice = choice || null;

            dlog('save:', { ok: SAVE.ok, choice: SAVE.lastChoice, wrote: !!rt });
            return SAVE.ok;
          }catch(err){
            dlog('save exception:', String(err));
            SAVE.ok = false;
            return false;
          }
        }

        function hardBlock(ev){
          ev.preventDefault();
          ev.stopPropagation();
          ev.stopImmediatePropagation();
        }

        function navigateIfSaved(a){
          if (!SAVE.ok){
            dlog('nav blocked: token missing');
            return;
          }
          const url = new URL(SAVE.lastHref || a.getAttribute('href') || '', location.href);
          requestAnimationFrame(() => location.assign(url.toString()));
        }

        // pointer ç³»ï¼šå¸¸ã«ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆé·ç§»ã¯æ­¢ã‚ã¦ä¿å­˜ã ã‘å®Ÿè¡Œï¼ˆå¤±æ•—ãªã‚‰ STOP ç¶™ç¶šï¼‰
        document.addEventListener('pointerdown', async (ev) => {
          const a = ev.target && ev.target.closest && ev.target.closest('a');
          if (!isTargetAnchor(a)) return;
          hardBlock(ev);
          const ok = await saveTokenFor(a);
          if (!ok) dlog('pointerdown save NG');
        }, { capture:true });

        document.addEventListener('mousedown', async (ev) => {
          const a = ev.target && ev.target.closest && ev.target.closest('a');
          if (!isTargetAnchor(a)) return;
          hardBlock(ev);
          if (!SAVE.ok) {
            const ok = await saveTokenFor(a);
            if (!ok) dlog('mousedown save NG');
          }
        }, { capture:true });

        document.addEventListener('mouseup', async (ev) => {
          const a = ev.target && ev.target.closest && ev.target.closest('a');
          if (!isTargetAnchor(a)) return;
          hardBlock(ev);
          if (!SAVE.ok) {
            const ok = await saveTokenFor(a);
            if (!ok) dlog('mouseup save NG');
          }
        }, { capture:true });

        // clickï¼šâ˜…æœ€çµ‚ã‚²ãƒ¼ãƒˆï¼ˆlocalStorage å®Ÿä½“ç¢ºèªï¼‰ã‚’é€šéã—ãŸã‚‰ã ã‘é·ç§»
        document.addEventListener('click', async (ev) => {
          const a = ev.target && ev.target.closest && ev.target.closest('a');
          if (!isTargetAnchor(a)) return;
          hardBlock(ev);

          if (!SAVE.ok) await saveTokenFor(a);

          try {
            const Kt = cscs_from_a_token:${qid};
            await Promise.resolve();
            const rt = localStorage.getItem(Kt);
            if (!rt) {
              dlog('click STOP (no token in localStorage)');
              return;
            }
          } catch (e) {
            dlog('click STOP (exception on localStorage check):', String(e));
            return;
          }

          navigateIfSaved(a);
        }, { capture:true });

        // ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ï¼ˆEnter/Spaceï¼‰ã‚‚åŒç­‰ã®ã‚¬ãƒ¼ãƒ‰
        document.addEventListener('keydown', async (ev) => {
          if (ev.key !== 'Enter' && ev.key !== ' ') return;
          const a = document.activeElement;
          if (!isTargetAnchor(a)) return;
          hardBlock(ev);

          if (!SAVE.ok) await saveTokenFor(a);

          try {
            const Kt = cscs_from_a_token:${qid};
            await Promise.resolve();
            const rt = localStorage.getItem(Kt);
            if (!rt) {
              dlog('kbd STOP (no token in localStorage)');
              return;
            }
          } catch (e) {
            dlog('kbd STOP (exception on localStorage check):', String(e));
            return;
          }

          navigateIfSaved(a);
        }, { capture:true });

      })();
      </script>
    

      <script>
      (function(){
        if (window.__cscsBPreflightInstalled) return;
        window.__cscsBPreflightInstalled = true;

        // === consumedã‚¿ãƒ–ãªã‚‰æœ€å„ªå…ˆã§ Kt ã‚’å‰Šé™¤ï¼ˆb_judge_record.js èµ·å‹•å‰ã«æ½°ã™ï¼‰ ===
        try {
          const mDay = (location.pathname.match(/_build_cscs_(\d{8})/)||[])[1];
          const n3   = (location.pathname.match(/q(\d{3})_b/i)||[])[1];
          if (mDay && n3) {
            const qid   = ${mDay}-${n3};
            const gk    = cscs_ab_consumed:${qid};
            const ktKey = cscs_from_a_token:${qid};
            if (sessionStorage.getItem(gk) === '1') {
              try { localStorage.removeItem(ktKey); } catch(_){}
              console.debug('[B:preflight] removed Kt before record.js', {qid});
            }
          }
        } catch(_){}

        // qid = YYYYMMDD-NNNï¼ˆBãƒšãƒ¼ã‚¸é™å®šï¼‰
        const mDay  = location.pathname.match(/_build_cscs_(\d{8})/);
        const mStem = location.pathname.match(/(?:^|\/)(q\d{3})_b(?:\.html)?(?:\/)?$/i);
        if (!mDay || !mStem) return;
        const day  = mDay[1];
        const num3 = mStem[1].slice(1);
        const qid  = ${day}-${num3};

        const Kt  = cscs_from_a_token:${qid};
        const Kc  = cscs_from_a:${qid};
        const KsT = cscs_ab_shadow_token:${qid};   // å½±ãƒˆãƒ¼ã‚¯ãƒ³ï¼ˆsessionStorageï¼‰
        const KsC = cscs_ab_shadow_choice:${qid};  // å½±choiceï¼ˆsessionStorageï¼‰

        // â˜… åˆå›åˆ°ç€ãƒ•ãƒ¬ãƒ¼ãƒ ã§ Kt/Kc ã‚’ã€Œå½±ã€ã«é€€é¿ â†’ localStorage ã‹ã‚‰ã¯è¦‹ãˆãªãã™ã‚‹
        try{
          const hasShadow = sessionStorage.getItem(KsT);
          const lt = localStorage.getItem(Kt);
          const lc = localStorage.getItem(Kc);
          if (!hasShadow && (lt || lc)) {
            if (lt) { try{ sessionStorage.setItem(KsT, lt); }catch(_){} }
            if (lc) { try{ sessionStorage.setItem(KsC, lc); }catch(_){} }
            try{ localStorage.removeItem(Kt); }catch(_){}
            // Kc ã¯ UI å¾©å…ƒã«ä½¿ã†ã®ã§ local å´ã‚‚æ®‹ã™ï¼ˆâ€»æ¶ˆã•ãªã„ï¼‰
            console.debug('[B:preflight] moved Kt/Kc to session shadow', { qid });
          }
        }catch(_){}

        // ç”»é¢å·¦ä¸Šã«è¨ºæ–­ç”¨ãƒ‘ãƒãƒ«ï¼ˆBï¼‰
        const diag = document.createElement('div');
        diag.id = 'cscs_token_diag_b';
        diag.style.cssText =
          'position:fixed;z-index:99999;left:8px;top:8px;max-width:46vw;font:12px/1.4 -apple-system,system-ui,Segoe UI,Roboto,sans-serif;background:rgba(22,22,22,.8);color:#fff;padding:8px 10px;border-radius:6px;white-space:pre-wrap;word-break:break-word;pointer-events:none;';
        diag.textContent = '[B:preflight] initâ€¦';
        document.addEventListener('DOMContentLoaded', () => document.body.appendChild(diag));

        const blog = (...a) => { try { console.debug('[B:preflight]', ...a); } catch(_){} };
        const setPanel = (o) => { try{
          diag.textContent = '[B:preflight] ' + Object.entries(o).map(([k,v]) => ${k}: ${v}).join(' | ');
        }catch(_){ } };

        // åˆ°ç€ç›´å¾Œï¼šä¸è¶³ãªã‚‰ sessionStorage ã‹ã‚‰å³æ™‚ãƒãƒƒã‚¯ãƒ•ã‚£ãƒ«ï¼ˆâ˜…ãƒªãƒ­ãƒ¼ãƒ‰æ™‚ã¯å®Ÿè¡Œã—ãªã„ï¼†ä¸€åº¦ä½¿ã£ãŸã‚‰å³æ¶ˆã™ï¼‰
        let initLocalToken = null, initLocalChoice = null;
        try {
          // 1) æ—¢å­˜ localStorage ã‚’ç¢ºèª
          initLocalToken  = localStorage.getItem(Kt);
          initLocalChoice = localStorage.getItem(Kc);

          // 2) ãƒ–ãƒ©ã‚¦ã‚¶ã®ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ç¨®åˆ¥ã‚’åˆ¤å®šï¼ˆreload ã®å ´åˆã¯ãƒãƒƒã‚¯ãƒ•ã‚£ãƒ«ç¦æ­¢ï¼‰
          let isReload = false;
          try {
            const nav = (performance && performance.getEntriesByType)
              ? (performance.getEntriesByType('navigation')[0] || null)
              : null;
            isReload = !!(nav && nav.type === 'reload');
          } catch(_){ /* noop */ }

          // 3) token ãŒç„¡ãã€ã‹ã¤ãƒªãƒ­ãƒ¼ãƒ‰ã§ã¯ãªã„å ´åˆã®ã¿ sessionStorage ã‹ã‚‰ä¸€åº¦ã ã‘è£œå¡«
          if (!initLocalToken && !isReload) {
            const sq = sessionStorage.getItem('cscs_last_token_qid');
            const sv = sessionStorage.getItem('cscs_last_token_value');
            const sc = sessionStorage.getItem('cscs_last_choice');

            if (sq === qid && sv) {
              // backfill â†’ ç›´å¾Œã« sessionStorage ã‚’å¿…ãšæ¶ˆå»ï¼ˆâ€»ãƒªãƒ­ãƒ¼ãƒ‰æ™‚ã®å†ãƒãƒƒã‚¯ãƒ•ã‚£ãƒ«é˜²æ­¢ï¼‰
              try { localStorage.setItem(Kt, sv); } catch(_){}
              if (sc) { try { localStorage.setItem(Kc, sc); } catch(_){ } }

              try {
                sessionStorage.removeItem('cscs_last_token_qid');
                sessionStorage.removeItem('cscs_last_token_value');
                sessionStorage.removeItem('cscs_last_choice');
              } catch(_){}

              initLocalToken  = localStorage.getItem(Kt);
              initLocalChoice = localStorage.getItem(Kc);
              blog('backfilled from sessionStorage (once, then cleared):', { qid, Kt, Kc });
            }
          } else if (isReload) {
            blog('skip backfill on reload');
          }
        } catch (e) {
          blog('localStorage get exception:', String(e));
        }

        // Aå´ãŒãƒ‡ãƒãƒƒã‚°ç”¨ã«æ®‹ã—ãŸã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒŸãƒ©ãƒ¼ã‚‚å–å¾—ï¼ˆæ¯”è¼ƒç”¨ï¼‰
        let sessQid = null, sessToken = null, sessChoice = null;
        try {
          sessQid    = sessionStorage.getItem('cscs_last_token_qid');
          sessToken  = sessionStorage.getItem('cscs_last_token_value');
          sessChoice = sessionStorage.getItem('cscs_last_choice');
        } catch (e) {
          blog('sessionStorage get exception:', String(e));
        }

        const shadowToken  = (function(){ try{ return sessionStorage.getItem(KsT); }catch(_){ return null; } })();
        const shadowChoice = (function(){ try{ return sessionStorage.getItem(KsC); }catch(_){ return null; } })();
        blog('arrived', {
          qid, Kt, Kc,
          initLocalToken, initLocalChoice,
          shadowToken: !!shadowToken,
          shadowChoice: shadowChoice || null,
          sessQid, sessToken: !!sessToken, sessChoice
        });

        // --- ãƒ­ãƒ¼ãƒ«ã‚¢ãƒƒãƒ—ï¼ˆé›†è¨ˆï¼‰ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ ---
        function ensureDayIndex(dayStr){
          const dk = cscs_rollup:${dayStr};
          let arr = [];
          try {
            const raw = localStorage.getItem(dk);
            if (raw) arr = JSON.parse(raw);
          } catch(_){}
          if (!Array.isArray(arr)) arr = [];
          if (arr.length < 30) {
            const need = 30 - arr.length;
            for (let i = 0; i < need; i++) arr.push(null);
          }
          return { key: dk, arr };
        }

        function qIndexFromQid(qidStr){
          // qidStr = "YYYYMMDD-NNN"
          const m = qidStr && qidStr.match(/-(\d{3})$/);
          if (!m) return -1;
          const n = parseInt(m[1], 10);
          return (n >= 1 && n <= 30) ? (n - 1) : -1;
        }

        function recordArrival(qidStr, tokenVal, choiceVal){
          const dayStr = qidStr.slice(0, 8);
          const { key, arr } = ensureDayIndex(dayStr);
          const idx = qIndexFromQid(qidStr);
          if (idx < 0) return false;

          const now = Date.now();
          const entry = {
            qid: qidStr,
            token: tokenVal || null,
            choice: choiceVal || null,
            ts: now
          };
          arr[idx] = entry;

          try {
            localStorage.setItem(key, JSON.stringify(arr));
            localStorage.setItem('cscs_last_seen_day', dayStr);
            blog('rollup saved', { key, idx, qid: qidStr });
            return true;
          } catch (e) {
            blog('rollup save exception:', String(e));
            return false;
          }
        }

        // â—†ãƒ­ãƒ¼ãƒ«ã‚¢ãƒƒãƒ—ã¸å³æ™‚åæ˜ ï¼ˆtoken/choice ã®ã©ã¡ã‚‰ã‹ãŒã‚ã‚Œã°è¨˜éŒ²ï¼‰
        try{
          // consumed ã‚¿ãƒ–ã€ã¾ãŸã¯ç›´å¾ŒAâ†’Båˆå›ï¼ˆæœªæ¶ˆè²»ï¼‰ã§ã¯ rollup ã‚’ä¿ç•™
          const gk = cscs_ab_consumed:${qid};
          const alreadyConsumed = sessionStorage.getItem(gk) === '1';
          if (alreadyConsumed) {
            blog('rollup skip: already consumed tab', { qid });
          } else if (!alreadyConsumed) {
            // åˆå›ã‚¿ãƒ–ã§ã‚‚ã€ã¾ã  b_judge.js ãŒ tally å‰ã® Kt ã‚’æŒã¤çŠ¶æ…‹ã€‚
            // ã“ã“ã§ã¯ rollup ã‚’ä¿ç•™ã—ã€b_judge.js å´ã«ä»»ã›ã‚‹ã€‚
            blog('rollup deferred: let b_judge.js handle tally', { qid });
          }
        }catch(e){
          blog('rollup exception:', String(e));
        }

        setPanel({
          qid,
          localToken:   initLocalToken ? 'set' : 'null',
          localChoice:  initLocalChoice || 'null',
          shadowToken:  (function(){ try{ return sessionStorage.getItem(KsT) ? 'set' : 'null'; }catch(_){ return 'err'; } })(),
          shadowChoice: (function(){ try{ return sessionStorage.getItem(KsC) || 'null'; }catch(_){ return 'err'; } })(),
          sessQid:      sessQid || 'null',
          sessToken:    sessToken ? 'set' : 'null',
          sessChoice:   sessChoice || 'null'
        });

        // ä»¥é™ã€èª°ãŒ localStorage ã‚’æ›¸ãæ›ãˆã‚‹ã‹ç›£è¦–ï¼ˆstack ä»˜ãï¼‰
        try{
          const LS = localStorage;
          const _set    = LS.setItem.bind(LS);
          const _remove = LS.removeItem.bind(LS);
          const _clear  = LS.clear.bind(LS);

          LS.setItem = function(k, v){
            blog('setItem', {k, v}, 'stack:', new Error().stack);
            return _set(k, v);
          };
          LS.removeItem = function(k){
            blog('removeItem', {k}, 'stack:', new Error().stack);
            return _remove(k);
          };
          LS.clear = function(){
            blog('clear()', 'stack:', new Error().stack);
            return _clear();
          };
        }catch(e){
          blog('hook localStorage methods failed:', String(e));
        }

        window.addEventListener('beforeunload', (e)=>{ blog('beforeunload (B)', {trusted:e.isTrusted}); }, {capture:true});
        window.addEventListener('unload',       (e)=>{ blog('unload (B)'      , {trusted:e.isTrusted}); }, {capture:true});
      })();
      </script>
    

  <script>
    function autoPlayAudio(src) {
      const audio = new Audio(src);
      audio.preload = "auto";
      audio.playsInline = true;
      const p = audio.play();
      if (p && typeof p.catch === "function") {
        p.catch(() => {
          const btn = document.createElement("button");
          btn.textContent = "ğŸ”Š éŸ³å£°ã‚’å†ç”Ÿ";
          btn.className = "audio-fallback-btn";
          btn.addEventListener("click", () => {
            audio.play().then(() => btn.remove()).catch(() => {
              btn.textContent = "å†ç”Ÿã§ãã¾ã›ã‚“ï¼ˆãƒ–ãƒ©ã‚¦ã‚¶è¨­å®šã‚’ç¢ºèªï¼‰";
            });
          });
          document.body.appendChild(btn);
        });
      }
    }
    window.addEventListener("DOMContentLoaded", () => {
      autoPlayAudio("/_build_cscs_20251117/audio/q006_a.m4a");
    });
  </script>
  <style>

/* å¤±æ•—æ™‚ã«ã ã‘å‡ºã‚‹å°ã•ãªå†ç”Ÿãƒœã‚¿ãƒ³ */
.audio-fallback-btn{
  position: fixed;
  right: 16px;
  bottom: 16px; /* å³ä¸‹é…ç½®ï¼ˆç¾çŠ¶ç¶­æŒï¼‰ */
  padding: 8px 12px;
  font-size: 16px;
  background: #222;
  color: #fff;
  border: 1px solid #444;
  border-radius: 8px;
  cursor: pointer;
  opacity: .9;
  z-index: 10000; /* Bã®ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ã‚ˆã‚Šå‰é¢ */
}
.audio-fallback-btn:hover{ opacity: 1; }

  </style>


  <script>
    // ä»Šæ—¥ã®æ—¥ä»˜ï¼ˆ_build_cscs_YYYYMMDD ã‹ã‚‰ï¼‰
    function getDayFromPath(){
      const m = (window.location.pathname||"").match(/_build_cscs_(\d{8})/);
      return m ? m[1] : "unknown";
    }
    // ãã®æ—¥ã®ã€Œç¾åœ¨ã® runIdã€ã‚’ä¿å­˜/å–å¾—ã™ã‚‹ã‚­ãƒ¼
    function runKey(day){ return cscs_current_runId_${day}; }

    // æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰ã€ãã®æ—¥ã®æœ€å¤§ runId ã‚’å¾—ã‚‹
    function getMaxRunIdForDay(day, all){
      const runs = all.filter(r => r && r.day === day && Number.isInteger(r.runId)).map(r => r.runId);
      return runs.length ? Math.max.apply(null, runs) : 0;
    }

    // ãã®æ—¥ã®ç¾åœ¨ã® runId ã‚’å–å¾—ï¼ˆãªã‘ã‚Œã°æ–°è¦ã§æ¡ç•ªã—ã¦ä¿å­˜ï¼‰
    function ensureCurrentRunId(day){
      const KEY = "cscs_results";
      let arr=[]; try{ arr = JSON.parse(localStorage.getItem(KEY) || "[]"); }catch(_){ arr = []; }

      const k = runKey(day);
      const exists = localStorage.getItem(k);
      if (exists) return parseInt(exists, 10);

      const next = getMaxRunIdForDay(day, arr) + 1;
      localStorage.setItem(k, String(next));
      return next;
    }

    // ã€Œæ–°ã—ã„å±¥æ­´ã§é–‹å§‹ã€æŒ‡å®šãŒã‚ã‚Œã° runId ã‚’é€²ã‚ã‚‹
    function maybeStartNewRunIfRequested(){
      const day = getDayFromPath();
      const params = new URLSearchParams(window.location.search);
      if (params.get("newrun") === "1"){
        const KEY = "cscs_results";
        let arr=[]; try{ arr = JSON.parse(localStorage.getItem(KEY) || "[]"); }catch(_){ arr = []; }
        const next = getMaxRunIdForDay(day, arr) + 1;
        localStorage.setItem(runKey(day), String(next));
      }
    }

    // ãã®æ—¥ã®æœ€æ–° runId ã‚’å–å¾—ï¼ˆãªã‘ã‚Œã° 1ï¼‰
    function getLatestRunId(day){
      const KEY = "cscs_results";
      let arr=[]; try{ arr = JSON.parse(localStorage.getItem(KEY) || "[]"); }catch(_){ arr = []; }
      const m = getMaxRunIdForDay(day, arr);
      return m || 1;
    }
  </script>


      <script> try{ maybeStartNewRunIfRequested(); }catch(_){} </script>
    

<style>
/* å…¨ãƒšãƒ¼ã‚¸å¼·åˆ¶ï¼šhtml/body ã®é«˜ã•æŒ‡å®šã‚’è§£é™¤ */
html, body { height: auto !important; min-height: 0 !important; }
</style>


<link rel="stylesheet" href="../../assets/wrong_badge.css">
<script src="../../assets/wrong_badge.js" defer></script>


<link rel="stylesheet" href="../../assets/fav_modal.css">
<script src="../../assets/fav_modal.js" defer></script>


<link rel="stylesheet" href="../../assets/main.css">


<style>
.top-date {
    color: #a8b0b8;
    opacity: .95;
    font-size: 22px;
    width: auto;
    margin: 0 10px 0 0;
}
.crumb-field {
    font-size: 22px;
    font-weight: 400;
}
</style>


<style>
/* å¾Œã‹ã‚‰ --h1-lh ã§è‡ªç”±ã«å¤‰æ›´å¯ï¼ˆæ—¢å®šã¯ normalï¼‰ */
h1 { line-height: var(--h1-lh, normal); }
</style>


<style>
/* å¾Œã‹ã‚‰ --h1-fs ã§è‡ªç”±ã«å¤‰æ›´å¯ï¼ˆæ—¢å®šã¯ inheritã€‚UAæ—¢å®šã‚„ main.css ãŒæ±ºã‚ã‚‹ï¼‰ */
h1 { font-size: var(--h1-fs, inherit); }
</style>

</head>
<body>
  <div class="wrap">
    <div class='topmeta'><div class='topmeta-left'><div class='top-title'>NSCA CSCS è©¦é¨“å¯¾ç­–å•é¡Œé›† (53/90)</div><div class='top-number'>å•é¡Œç•ªå·: <span class='top-number-val'>6/30</span></div><div class='top-level'>Level 1</div></div><div class='topmeta-right'></div></div>
    <div class='qno'><span class="top-date">2025å¹´11æœˆ17æ—¥</span><span class='crumb-field'>ãƒ—ãƒ­ã‚°ãƒ©ãƒ ãƒ‡ã‚¶ã‚¤ãƒ³</span><span class='crumb-sep'> ï¼ </span><span class='crumb-theme'>ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°åŸå‰‡</span></div>
    <h1 style="">ã€Œé‹å‹•å˜ä½ã®å‹•å“¡ã€ã¯ä¸»ã«ä½•ã«ã‚ˆã‚Šå·¦å³ã•ã‚Œã‚‹ã‹</h1>
    <ol class='opts' type='A'><li><a class="opt-link" href="q006_b.html?choice=A">è² è·å¼·åº¦</a></li><li><a class="opt-link" href="q006_b.html?choice=B">ç­‹ç·šç¶­ã‚¿ã‚¤ãƒ—</a></li><li><a class="opt-link" href="q006_b.html?choice=C">ä¼‘æ¯æ™‚é–“</a></li><li><a class="opt-link" href="q006_b.html?choice=D">åå¾©å›æ•°</a></li></ol>
    <div class='hint'>ï¼ˆã“ã®å¾Œã€æ­£è§£ã¨è§£èª¬ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ï¼‰</div>
    <!-- <div class="footer">ï¼ˆã“ã®ã‚¹ãƒ©ã‚¤ãƒ‰ã¯è‡ªå‹•ç”Ÿæˆã§ã™ï¼‰</div> -->
  </div>
<script type="application/json" id="cscs-meta">{"qid": "2025å¹´11æœˆ17æ—¥-006", "field": "ãƒ—ãƒ­ã‚°ãƒ©ãƒ ãƒ‡ã‚¶ã‚¤ãƒ³", "theme": "ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°åŸå‰‡", "level": "Level 1", "date": "2025å¹´11æœˆ17æ—¥", "number": "6", "quiztype": "å˜ä¸€åˆ†é‡", "tags": {"cause": "é«˜å¼·åº¦è² è·æç¤º", "process": "é«˜é–¾å€¤é‹å‹•å˜ä½å‹•å“¡", "outcome": "ç­‹åŠ›ç™ºæ®èƒ½åŠ›å‘ä¸Š"}}</script>

  <!-- å·¦ä¸‹ã® [TOPã¸æˆ»ã‚‹] ãƒœã‚¿ãƒ³ -->
  <a class="back-to-top" href="../../index.html" title="å•é¡Œä¸€è¦§ã«æˆ»ã‚‹">ï¼»TOPã¸æˆ»ã‚‹ï¼½</a>


  <!-- Aå°‚ç”¨ï¼šå•é¡Œä¸€è¦§ï¼ˆ2ã‚«ãƒ©ãƒ ï¼‰ -->
  <link rel="stylesheet" href="../../assets/nav_list.css">
  <script src="../../assets/nav_list.js" data-a-nav="1"></script>

<!-- Aãƒ‘ãƒ¼ãƒˆï¼šé¡ä¼¼å•é¡Œï¼ˆå…¨2700å•æ¨ªæ–­ï¼‰ -->
<div id="similar-list" data-src="../../assets/cscs_meta_all.json" data-mode="similar" data-qtext="ã€Œé‹å‹•å˜ä½ã®å‹•å“¡ã€ã¯ä¸»ã«ä½•ã«ã‚ˆã‚Šå·¦å³ã•ã‚Œã‚‹ã‹"></div>
<script src="../../assets/similar_list.js" data-src="../../assets/cscs_meta_all.json" data-mode="similar"></script>

<script>
  // === â‘  detectQid ===
  function detectQidFromLocation() {
    const m = location.pathname.match(/_build_cscs_(\d{8})\/slides\/q(\d{3})_a(?:\.html)?$/);
    if (!m) return null;
    return `${m[1]}:q${m[2]}`;
  }
  const QID = detectQidFromLocation();

  // === â‘¡ å·®åˆ†ã‚­ãƒ¥ãƒ¼ ===
  const queue = { correctDelta: {}, incorrectDelta: {} };
  let sendTimer = null;
  function scheduleSend(){
    if (!navigator.onLine) return;
    clearTimeout(sendTimer);
    sendTimer = setTimeout(sendDelta, 1000);
  }

  function updateSyncTotalsDisplay(c,i){
    const el = document.getElementById("cscs_sync_totals");
    if (el) el.textContent = `correct:${c} / incorrect:${i}`;
  }

  async function sendDelta(){
    const hasC = Object.keys(queue.correctDelta).length>0;
    const hasI = Object.keys(queue.incorrectDelta).length>0;
    if (!hasC && !hasI) return;
    const payload = { correctDelta: queue.correctDelta, incorrectDelta: queue.incorrectDelta };
    try{
      const res = await fetch("/api/sync/merge", {
        method:"POST",
        headers:{ "content-type":"application/json" },
        body: JSON.stringify(payload)
      });
      if (!res.ok) throw new Error(res.status);
      queue.correctDelta={}; queue.incorrectDelta={};
      const latest = await res.json();
      if (QID){
        updateSyncTotalsDisplay(
          (latest.correct && latest.correct[QID])||0,
          (latest.incorrect && latest.incorrect[QID])||0
        );
      }
    }catch(e){ console.warn("[SYNC] merge failed", e); }
  }

  window.CSCS_SYNC = {
    recordCorrect(){ if(QID){ queue.correctDelta[QID]=(queue.correctDelta[QID]||0)+1; scheduleSend(); } },
    recordIncorrect(){ if(QID){ queue.incorrectDelta[QID]=(queue.incorrectDelta[QID]||0)+1; scheduleSend(); } },
    async fetchServer(){
      const r = await fetch("/api/sync/state");
      if(!r.ok) throw new Error(r.statusText);
      return r.json();
    }
  };

  // === â‘£ åˆæœŸãƒ­ãƒ¼ãƒ‰ã§ã‚µãƒ¼ãƒã®ç´¯ç©å–å¾— ===
  window.addEventListener("DOMContentLoaded", async () => {
    if (!QID) return;
    try{
      const s = await CSCS_SYNC.fetchServer();
      updateSyncTotalsDisplay(
        (s.correct && s.correct[QID])||0,
        (s.incorrect && s.incorrect[QID])||0
      );
    }catch(e){ console.warn("[SYNC] fetch failed", e); }
  });

  // === â‘¤ ãƒ†ã‚¹ãƒˆUI ===
  (function(){
    if (!QID) return;
    const box = document.createElement("div");
    box.style.cssText="position:fixed;right:12px;bottom:62px;z-index:9999;background:#222;color:#eee;border:1px solid #444;border-radius:8px;padding:8px 10px;font:12px/1.2 system-ui";
    box.innerHTML = `
      <div style="margin-bottom:4px;opacity:.8;">SYNC test: <b>${QID}</b></div>
      <div id="cscs_sync_totals" style="margin-bottom:6px;font-size:11px;opacity:.8;">correct:0 / incorrect:0</div>
      <button id="cscs_sync_ok" style="margin-right:6px">+correct</button>
      <button id="cscs_sync_ng" style="margin-right:6px">+incorrect</button>
      <button id="cscs_sync_reset">reset</button>
    `;
    document.body.appendChild(box);
    box.querySelector("#cscs_sync_ok").onclick = ()=>CSCS_SYNC.recordCorrect();
    box.querySelector("#cscs_sync_ng").onclick = ()=>CSCS_SYNC.recordIncorrect();
    box.querySelector("#cscs_sync_reset").onclick = async ()=>{
      try{
        const r = await fetch("/api/sync/reset",{method:"POST",headers:{"content-type":"application/json"},body:"{}"});
        const latest = await r.json();
        updateSyncTotalsDisplay(
          (latest.correct && latest.correct[QID])||0,
          (latest.incorrect && latest.incorrect[QID])||0
        );
      }catch(e){ console.warn("[SYNC] reset failed", e); }
    };
  })();

  window.addEventListener("online", sendDelta);
</script>

</body>
</html>